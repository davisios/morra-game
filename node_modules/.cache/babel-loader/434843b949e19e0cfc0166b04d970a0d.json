{"ast":null,"code":"var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function () {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}; // This has no dependencies on other shared things\n\n\nimport ethers from 'ethers';\nimport { bigNumberify, bigNumberToNumber } from './CBR.mjs';\nimport { apiStateMismatchError, debug, j2s } from './shared_impl.mjs';\nexport { bigNumberToNumber, apiStateMismatchError };\nvoid debug;\nexport var asMaybe = function (v) {\n  if (v === undefined) {\n    return ['None', null];\n  } else {\n    return ['Some', v];\n  }\n};\nexport var fromSome = function (mo, da) {\n  if (mo[0] === 'Some') {\n    return mo[1];\n  } else {\n    return da;\n  }\n};\n;\n\nvar objectIsEmpty = function (obj) {\n  return obj && Object.keys(obj).length === 0 && Object.getPrototypeOf(obj) === Object.prototype;\n};\n\nfunction hasProp(data, prop) {\n  return prop in data;\n}\n\nexport var formatAssertInfo = function (ai) {\n  var e_1, _b;\n\n  var msg = '';\n\n  if (typeof ai === 'string') {\n    msg = \": \".concat(ai);\n  } else if (ai === null || ai === undefined) {} else if (typeof ai === 'object') {\n    if (hasProp(ai, 'who')) {\n      msg += \": \".concat(ai.who);\n      delete ai.who;\n    }\n\n    if (hasProp(ai, 'msg')) {\n      if (ai.msg !== null) {\n        msg += \": \".concat(ai.msg);\n      }\n\n      delete ai.msg;\n    }\n\n    if (hasProp(ai, 'at')) {\n      msg += \"\\n  at \".concat(ai.at);\n      delete ai.at;\n    }\n\n    var rest = \":\";\n\n    if (hasProp(ai, 'fs') && Array.isArray(ai.fs)) {\n      try {\n        for (var _c = __values(ai.fs), _d = _c.next(); !_d.done; _d = _c.next()) {\n          var f = _d.value;\n          msg += \"\\n  \".concat(f);\n        }\n      } catch (e_1_1) {\n        e_1 = {\n          error: e_1_1\n        };\n      } finally {\n        try {\n          if (_d && !_d.done && (_b = _c[\"return\"])) _b.call(_c);\n        } finally {\n          if (e_1) throw e_1.error;\n        }\n      }\n\n      delete ai.fs;\n      rest = \"\\n\";\n    }\n\n    if (!objectIsEmpty(ai)) {\n      msg += \"\".concat(rest, \" \").concat(j2s(ai));\n    }\n  }\n\n  return msg;\n};\nexport var assert = function (d, ai) {\n  if (ai === void 0) {\n    ai = {};\n  }\n\n  if (!d) {\n    throw Error(\"Assertion failed\".concat(formatAssertInfo(ai)));\n  }\n};\nexport var checkedBigNumberify = function (at, m, x) {\n  var xb = bigNumberify(x);\n\n  if (xb.gte(0) && xb.lte(m)) {\n    return xb;\n  }\n\n  throw Error(\"bigNumberify: \".concat(x, \" out of range [0, \").concat(m, \"] at \").concat(at));\n};\nexport function protect(ctc, v, ai) {\n  if (ai === void 0) {\n    ai = null;\n  }\n\n  debug(\"protect\", ctc.name, v);\n\n  try {\n    // .canonicalize turns stuff into the \"canonical backend representation\"\n    return ctc.canonicalize(v);\n  } catch (e) {\n    throw Error(\"Protect failed: expected \".concat(ctc.name, \" but got \").concat(j2s(v)).concat(formatAssertInfo(ai), \"\\n\").concat(j2s(e)));\n  }\n}\n;\nvar _b = ethers.utils,\n    toUtf8Bytes = _b.toUtf8Bytes,\n    isHexString = _b.isHexString;\nexport var hexlify = ethers.utils.hexlify;\nexport var isHex = isHexString;\nexport var stringToHex = function (x) {\n  return hexlify(toUtf8Bytes(x));\n};\n\nvar hexToInt = function (x) {\n  return parseInt(x, 16);\n};\n\nvar forceHex = function (x) {\n  return isHex(x) ? x : stringToHex(x);\n};\n\nexport var bytesEq = function (x, y) {\n  return forceHex(x) === forceHex(y);\n};\nexport var bytesConcat = function (x, y) {\n  // forceHex(x).concat(forceHex(y).slice(2));\n  return x.concat(y);\n};\nexport var eq = function (a, b) {\n  return bigNumberify(a).eq(bigNumberify(b));\n};\nexport var ge = function (a, b) {\n  return bigNumberify(a).gte(bigNumberify(b));\n};\nexport var gt = function (a, b) {\n  return bigNumberify(a).gt(bigNumberify(b));\n};\nexport var le = function (a, b) {\n  return bigNumberify(a).lte(bigNumberify(b));\n};\nexport var lt = function (a, b) {\n  return bigNumberify(a).lt(bigNumberify(b));\n};\nexport var eq256 = eq;\nexport var ge256 = ge;\nexport var gt256 = gt;\nexport var le256 = le;\nexport var lt256 = lt;\nexport var digest_xor = function (xd, yd) {\n  var clean = function (s) {\n    return s.slice(0, 2) === '0x' ? s.slice(2) : s;\n  };\n\n  var xc = clean(xd);\n  var yc = clean(yd);\n\n  var parseHex = function (xs) {\n    var ret = [];\n\n    for (var i = 0; i < xs.length; i += 2) {\n      ret.push(hexToInt(xs.substr(i, 2)));\n    }\n\n    return ret;\n  };\n\n  var xs = parseHex(xc);\n  var ys = parseHex(yc);\n  var result = '0x' + xs.map(function (x, i) {\n    return (x ^ ys[i]).toString(16).padStart(2, '0');\n  }).join('');\n  return result;\n};\nexport var bytes_xor = function (x, y) {\n  var xs = Buffer.from(x);\n  var ys = Buffer.from(y);\n  var xors = xs.map(function (x, i) {\n    return x ^ ys[i];\n  });\n  return String.fromCharCode.apply(String, __spreadArray([], __read(xors), false));\n};\nexport var btoiLast8 = function (b) {\n  var min = b.length < 8 ? 0 : b.length - 8;\n  var bb = Buffer.from(b);\n  var res = bigNumberify(0);\n\n  for (var i = min; i < b.length; i++) {\n    res = res.mul(256).add(bb[i]);\n  }\n\n  return res;\n};\nexport function Array_set(arr, idx, elem) {\n  var arrp = arr.slice();\n  arrp[idx] = elem;\n  return arrp;\n}\n;\n;\n\nvar basicMap = function () {\n  var m = {};\n\n  var basicSet = function (f, v) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      return __generator(this, function (_b) {\n        m[f] = v;\n        return [2\n        /*return*/\n        ];\n      });\n    });\n  };\n\n  var basicRef = function (f) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      return __generator(this, function (_b) {\n        return [2\n        /*return*/\n        , asMaybe(m[f])];\n      });\n    });\n  };\n\n  return {\n    ref: basicRef,\n    set: basicSet\n  };\n};\n\nvar copyMap = function (or) {\n  var m = basicMap();\n  var seen = {};\n\n  var copySet = function (f, v) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            seen[f] = true;\n            return [4\n            /*yield*/\n            , mapSet(m, f, v)];\n\n          case 1:\n            _b.sent();\n\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  var copyRef = function (f) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var mv;\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            if (!!seen[f]) return [3\n            /*break*/\n            , 3];\n            return [4\n            /*yield*/\n            , or(f)];\n\n          case 1:\n            mv = _b.sent();\n            return [4\n            /*yield*/\n            , copySet(f, mv[0] === 'Some' ? mv[1] : undefined)];\n\n          case 2:\n            _b.sent();\n\n            _b.label = 3;\n\n          case 3:\n            return [4\n            /*yield*/\n            , mapRef(m, f)];\n\n          case 4:\n            return [2\n            /*return*/\n            , _b.sent()];\n        }\n      });\n    });\n  };\n\n  return {\n    ref: copyRef,\n    set: copySet\n  };\n}; // dupe: () => {[key: string]: A},\n\n\nexport var newMap = function (opts) {\n  if (opts.isAPI) {\n    return copyMap(opts.ctc.apiMapRef(opts.idx, opts.ty));\n  } else {\n    return basicMap();\n  }\n};\nexport var mapSet = function (m, f, v) {\n  return __awaiter(void 0, void 0, void 0, function () {\n    return __generator(this, function (_b) {\n      switch (_b.label) {\n        case 0:\n          return [4\n          /*yield*/\n          , m.set(f, v)];\n\n        case 1:\n          _b.sent();\n\n          return [2\n          /*return*/\n          ];\n      }\n    });\n  });\n};\nexport var mapRef = function (m, f) {\n  return __awaiter(void 0, void 0, void 0, function () {\n    return __generator(this, function (_b) {\n      switch (_b.label) {\n        case 0:\n          return [4\n          /*yield*/\n          , m.ref(f)];\n\n        case 1:\n          return [2\n          /*return*/\n          , _b.sent()];\n      }\n    });\n  });\n};\nexport var Array_asyncMap = function (as, f) {\n  return __awaiter(void 0, void 0, void 0, function () {\n    var fWrap;\n    return __generator(this, function (_b) {\n      fWrap = function (_a, i) {\n        return f(as.map(function (a) {\n          return a[i];\n        }), i);\n      };\n\n      return [2\n      /*return*/\n      , Promise.all(as[0].map(fWrap))];\n    });\n  });\n};\nexport var Array_asyncReduce = function (as, b, f) {\n  return __awaiter(void 0, void 0, void 0, function () {\n    var accum, i, as_i;\n    return __generator(this, function (_b) {\n      switch (_b.label) {\n        case 0:\n          accum = b;\n          i = 0;\n          i = 0;\n          _b.label = 1;\n\n        case 1:\n          if (!(i < as[0].length)) return [3\n          /*break*/\n          , 4];\n          as_i = as.map(function (a) {\n            return a[i];\n          });\n          return [4\n          /*yield*/\n          , f(as_i, accum, i)];\n\n        case 2:\n          accum = _b.sent();\n          _b.label = 3;\n\n        case 3:\n          i++;\n          return [3\n          /*break*/\n          , 1];\n\n        case 4:\n          return [2\n          /*return*/\n          , accum];\n      }\n    });\n  });\n};\nexport var simMapDupe = function (sim_r, mapi, mapo) {\n  sim_r.maps[mapi] = copyMap(mapo.ref);\n};\n\nvar simMapLog = function (sim_r, f) {\n  sim_r.mapRefs.push(f);\n};\n\nexport var simMapRef = function (sim_r, mapi, f) {\n  return __awaiter(void 0, void 0, void 0, function () {\n    return __generator(this, function (_b) {\n      switch (_b.label) {\n        case 0:\n          simMapLog(sim_r, f);\n          return [4\n          /*yield*/\n          , mapRef(sim_r.maps[mapi], f)];\n\n        case 1:\n          return [2\n          /*return*/\n          , _b.sent()];\n      }\n    });\n  });\n};\nexport var simMapSet = function (sim_r, mapi, f, nv) {\n  return __awaiter(void 0, void 0, void 0, function () {\n    return __generator(this, function (_b) {\n      switch (_b.label) {\n        case 0:\n          simMapLog(sim_r, f);\n          return [4\n          /*yield*/\n          , mapSet(sim_r.maps[mapi], f, nv)];\n\n        case 1:\n          return [2\n          /*return*/\n          , _b.sent()];\n      }\n    });\n  });\n};\nexport var simTokenNew = function (sim_r, n, s, u, m, p, d, ctr) {\n  sim_r.txns.push({\n    kind: 'tokenNew',\n    n: n,\n    s: s,\n    u: u,\n    m: m,\n    p: p,\n    d: d\n  }); // XXX This is a hack... it is assumed that `ctr` is unique across tokens in a simulation block\n\n  return ctr;\n};\nexport var simContractNew = function (sim_r, cns, remote, ctr) {\n  sim_r.txns.push({\n    kind: 'contractNew',\n    cns: cns,\n    remote: remote\n  }); // XXX This is a hack... it is assumed that `ctr` is unique across tokens in a simulation block\n\n  return ctr;\n};\nexport var simTokenBurn = function (sim_r, tok, amt) {\n  sim_r.txns.push({\n    kind: 'tokenBurn',\n    tok: tok,\n    amt: amt\n  });\n};\nexport var simTokenDestroy = function (sim_r, tok) {\n  sim_r.txns.push({\n    kind: 'tokenDestroy',\n    tok: tok\n  });\n};\nexport var simTokenAccepted_ = function (sim_r, addr, tok) {\n  sim_r.txns.push({\n    kind: 'tokenAccepted',\n    addr: addr,\n    tok: tok\n  });\n};","map":{"version":3,"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","_","label","sent","t","trys","ops","f","y","g","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","__values","o","s","m","i","__read","r","ar","error","__spreadArray","to","from","pack","arguments","l","Array","prototype","slice","concat","ethers","bigNumberify","bigNumberToNumber","apiStateMismatchError","debug","j2s","asMaybe","undefined","fromSome","mo","da","objectIsEmpty","obj","Object","keys","getPrototypeOf","hasProp","data","prop","formatAssertInfo","ai","e_1","_b","msg","who","at","rest","isArray","fs","_c","_d","e_1_1","assert","d","Error","checkedBigNumberify","x","xb","gte","lte","protect","ctc","name","canonicalize","utils","toUtf8Bytes","isHexString","hexlify","isHex","stringToHex","hexToInt","parseInt","forceHex","bytesEq","bytesConcat","eq","a","b","ge","gt","le","lt","eq256","ge256","gt256","le256","lt256","digest_xor","xd","yd","clean","xc","yc","parseHex","xs","ret","substr","ys","map","toString","padStart","join","bytes_xor","Buffer","xors","String","fromCharCode","btoiLast8","min","bb","res","mul","add","Array_set","arr","idx","elem","arrp","basicMap","basicSet","basicRef","ref","set","copyMap","or","seen","copySet","mapSet","copyRef","mv","mapRef","newMap","opts","isAPI","apiMapRef","ty","Array_asyncMap","as","fWrap","_a","all","Array_asyncReduce","accum","as_i","simMapDupe","sim_r","mapi","mapo","maps","simMapLog","mapRefs","simMapRef","simMapSet","nv","simTokenNew","u","p","ctr","txns","kind","simContractNew","cns","remote","simTokenBurn","tok","amt","simTokenDestroy","simTokenAccepted_","addr"],"sources":["/Users/david/reach/morra/morraUI/node_modules/@reach-sh/stdlib/shared_backend.mjs"],"sourcesContent":["var __awaiter = (this && this.__awaiter) || function(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function(resolve) { resolve(value); }); }\n  return new(P || (P = Promise))(function(resolve, reject) {\n    function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n\n    function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n\n    function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = (this && this.__generator) || function(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] },\n    f, y, t, g;\n  return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n\n  function verb(n) { return function(v) { return step([n, v]); }; }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return { value: op[1], done: false };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n          if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n          if (op[0] === 6 && _.label < t[1]) { _.label = t[1];\n            t = op; break; }\n          if (t && _.label < t[2]) { _.label = t[2];\n            _.ops.push(op); break; }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) { op = [6, e];\n      y = 0; } finally { f = t = 0; }\n    if (op[0] & 5) throw op[1];\n    return { value: op[0] ? op[1] : void 0, done: true };\n  }\n};\nvar __values = (this && this.__values) || function(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n    m = s && o[s],\n    i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function() {\n      if (o && i >= o.length) o = void 0;\n      return { value: o && o[i++], done: !o };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n    r, ar = [],\n    e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) { e = { error: error }; } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally { if (e) throw e.error; }\n  }\n  return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function(to, from, pack) {\n  if (pack || arguments.length === 2)\n    for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n        if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n        ar[i] = from[i];\n      }\n    }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\n// This has no dependencies on other shared things\nimport ethers from 'ethers';\nimport { bigNumberify, bigNumberToNumber, } from './CBR.mjs';\nimport { apiStateMismatchError, debug, j2s, } from './shared_impl.mjs';\nexport { bigNumberToNumber, apiStateMismatchError, };\nvoid(debug);\nexport var asMaybe = function(v) {\n  if (v === undefined) {\n    return ['None', null];\n  } else {\n    return ['Some', v];\n  }\n};\nexport var fromSome = function(mo, da) {\n  if (mo[0] === 'Some') {\n    return mo[1];\n  } else {\n    return da;\n  }\n};;\nvar objectIsEmpty = function(obj) {\n  return (obj &&\n    Object.keys(obj).length === 0 &&\n    Object.getPrototypeOf(obj) === Object.prototype);\n};\n\nfunction hasProp(data, prop) {\n  return prop in data;\n}\nexport var formatAssertInfo = function(ai) {\n  var e_1, _b;\n  var msg = '';\n  if (typeof ai === 'string') {\n    msg = \": \".concat(ai);\n  } else if (ai === null || ai === undefined) {} else if (typeof ai === 'object') {\n    if (hasProp(ai, 'who')) {\n      msg += \": \".concat(ai.who);\n      delete ai.who;\n    }\n    if (hasProp(ai, 'msg')) {\n      if (ai.msg !== null) {\n        msg += \": \".concat(ai.msg);\n      }\n      delete ai.msg;\n    }\n    if (hasProp(ai, 'at')) {\n      msg += \"\\n  at \".concat(ai.at);\n      delete ai.at;\n    }\n    var rest = \":\";\n    if (hasProp(ai, 'fs') && Array.isArray(ai.fs)) {\n      try {\n        for (var _c = __values(ai.fs), _d = _c.next(); !_d.done; _d = _c.next()) {\n          var f = _d.value;\n          msg += \"\\n  \".concat(f);\n        }\n      } catch (e_1_1) { e_1 = { error: e_1_1 }; } finally {\n        try {\n          if (_d && !_d.done && (_b = _c[\"return\"])) _b.call(_c);\n        } finally { if (e_1) throw e_1.error; }\n      }\n      delete ai.fs;\n      rest = \"\\n\";\n    }\n    if (!objectIsEmpty(ai)) {\n      msg += \"\".concat(rest, \" \").concat(j2s(ai));\n    }\n  }\n  return msg;\n};\nexport var assert = function(d, ai) {\n  if (ai === void 0) { ai = {}; }\n  if (!d) {\n    throw Error(\"Assertion failed\".concat(formatAssertInfo(ai)));\n  }\n};\nexport var checkedBigNumberify = function(at, m, x) {\n  var xb = bigNumberify(x);\n  if (xb.gte(0) && xb.lte(m)) {\n    return xb;\n  }\n  throw Error(\"bigNumberify: \".concat(x, \" out of range [0, \").concat(m, \"] at \").concat(at));\n};\nexport function protect(ctc, v, ai) {\n  if (ai === void 0) { ai = null; }\n  debug(\"protect\", ctc.name, v);\n  try {\n    // .canonicalize turns stuff into the \"canonical backend representation\"\n    return ctc.canonicalize(v);\n  } catch (e) {\n    throw Error(\"Protect failed: expected \".concat(ctc.name, \" but got \").concat(j2s(v)).concat(formatAssertInfo(ai), \"\\n\").concat(j2s(e)));\n  }\n};\nvar _b = ethers.utils,\n  toUtf8Bytes = _b.toUtf8Bytes,\n  isHexString = _b.isHexString;\nexport var hexlify = ethers.utils.hexlify;\nexport var isHex = isHexString;\nexport var stringToHex = function(x) {\n  return hexlify(toUtf8Bytes(x));\n};\nvar hexToInt = function(x) { return parseInt(x, 16); };\nvar forceHex = function(x) {\n  return isHex(x) ? x : stringToHex(x);\n};\nexport var bytesEq = function(x, y) {\n  return forceHex(x) === forceHex(y);\n};\nexport var bytesConcat = function(x, y) {\n  // forceHex(x).concat(forceHex(y).slice(2));\n  return x.concat(y);\n};\nexport var eq = function(a, b) { return bigNumberify(a).eq(bigNumberify(b)); };\nexport var ge = function(a, b) { return bigNumberify(a).gte(bigNumberify(b)); };\nexport var gt = function(a, b) { return bigNumberify(a).gt(bigNumberify(b)); };\nexport var le = function(a, b) { return bigNumberify(a).lte(bigNumberify(b)); };\nexport var lt = function(a, b) { return bigNumberify(a).lt(bigNumberify(b)); };\nexport var eq256 = eq;\nexport var ge256 = ge;\nexport var gt256 = gt;\nexport var le256 = le;\nexport var lt256 = lt;\nexport var digest_xor = function(xd, yd) {\n  var clean = function(s) { return s.slice(0, 2) === '0x' ? s.slice(2) : s; };\n  var xc = clean(xd);\n  var yc = clean(yd);\n  var parseHex = function(xs) {\n    var ret = [];\n    for (var i = 0; i < xs.length; i += 2) {\n      ret.push(hexToInt(xs.substr(i, 2)));\n    }\n    return ret;\n  };\n  var xs = parseHex(xc);\n  var ys = parseHex(yc);\n  var result = '0x' + xs.map(function(x, i) { return (x ^ ys[i]).toString(16).padStart(2, '0'); }).join('');\n  return result;\n};\nexport var bytes_xor = function(x, y) {\n  var xs = Buffer.from(x);\n  var ys = Buffer.from(y);\n  var xors = xs.map(function(x, i) { return x ^ ys[i]; });\n  return String.fromCharCode.apply(String, __spreadArray([], __read(xors), false));\n};\nexport var btoiLast8 = function(b) {\n  var min = (b.length < 8) ? 0 : b.length - 8;\n  var bb = Buffer.from(b);\n  var res = bigNumberify(0);\n  for (var i = min; i < b.length; i++) {\n    res = res.mul(256).add(bb[i]);\n  }\n  return res;\n};\nexport function Array_set(arr, idx, elem) {\n  var arrp = arr.slice();\n  arrp[idx] = elem;\n  return arrp;\n};;\nvar basicMap = function() {\n  var m = {};\n  var basicSet = function(f, v) {\n    return __awaiter(void 0, void 0, void 0, function() {\n      return __generator(this, function(_b) {\n        m[f] = v;\n        return [2 /*return*/ ];\n      });\n    });\n  };\n  var basicRef = function(f) {\n    return __awaiter(void 0, void 0, void 0, function() {\n      return __generator(this, function(_b) {\n        return [2 /*return*/ , asMaybe(m[f])];\n      });\n    });\n  };\n  return { ref: basicRef, set: basicSet };\n};\nvar copyMap = function(or) {\n  var m = basicMap();\n  var seen = {};\n  var copySet = function(f, v) {\n    return __awaiter(void 0, void 0, void 0, function() {\n      return __generator(this, function(_b) {\n        switch (_b.label) {\n          case 0:\n            seen[f] = true;\n            return [4 /*yield*/ , mapSet(m, f, v)];\n          case 1:\n            _b.sent();\n            return [2 /*return*/ ];\n        }\n      });\n    });\n  };\n  var copyRef = function(f) {\n    return __awaiter(void 0, void 0, void 0, function() {\n      var mv;\n      return __generator(this, function(_b) {\n        switch (_b.label) {\n          case 0:\n            if (!!seen[f]) return [3 /*break*/ , 3];\n            return [4 /*yield*/ , or(f)];\n          case 1:\n            mv = _b.sent();\n            return [4 /*yield*/ , copySet(f, mv[0] === 'Some' ? mv[1] : undefined)];\n          case 2:\n            _b.sent();\n            _b.label = 3;\n          case 3:\n            return [4 /*yield*/ , mapRef(m, f)];\n          case 4:\n            return [2 /*return*/ , _b.sent()];\n        }\n      });\n    });\n  };\n  return { ref: copyRef, set: copySet };\n};\n// dupe: () => {[key: string]: A},\nexport var newMap = function(opts) {\n  if (opts.isAPI) {\n    return copyMap(opts.ctc.apiMapRef(opts.idx, opts.ty));\n  } else {\n    return basicMap();\n  }\n};\nexport var mapSet = function(m, f, v) {\n  return __awaiter(void 0, void 0, void 0, function() {\n    return __generator(this, function(_b) {\n      switch (_b.label) {\n        case 0:\n          return [4 /*yield*/ , m.set(f, v)];\n        case 1:\n          _b.sent();\n          return [2 /*return*/ ];\n      }\n    });\n  });\n};\nexport var mapRef = function(m, f) {\n  return __awaiter(void 0, void 0, void 0, function() {\n    return __generator(this, function(_b) {\n      switch (_b.label) {\n        case 0:\n          return [4 /*yield*/ , m.ref(f)];\n        case 1:\n          return [2 /*return*/ , _b.sent()];\n      }\n    });\n  });\n};\nexport var Array_asyncMap = function(as, f) {\n  return __awaiter(void 0, void 0, void 0, function() {\n    var fWrap;\n    return __generator(this, function(_b) {\n      fWrap = function(_a, i) { return f(as.map(function(a) { return a[i]; }), i); };\n      return [2 /*return*/ , Promise.all(as[0].map(fWrap))];\n    });\n  });\n};\nexport var Array_asyncReduce = function(as, b, f) {\n  return __awaiter(void 0, void 0, void 0, function() {\n    var accum, i, as_i;\n    return __generator(this, function(_b) {\n      switch (_b.label) {\n        case 0:\n          accum = b;\n          i = 0;\n          i = 0;\n          _b.label = 1;\n        case 1:\n          if (!(i < as[0].length)) return [3 /*break*/ , 4];\n          as_i = as.map(function(a) { return a[i]; });\n          return [4 /*yield*/ , f(as_i, accum, i)];\n        case 2:\n          accum = _b.sent();\n          _b.label = 3;\n        case 3:\n          i++;\n          return [3 /*break*/ , 1];\n        case 4:\n          return [2 /*return*/ , accum];\n      }\n    });\n  });\n};\nexport var simMapDupe = function(sim_r, mapi, mapo) {\n  sim_r.maps[mapi] = copyMap(mapo.ref);\n};\nvar simMapLog = function(sim_r, f) {\n  sim_r.mapRefs.push(f);\n};\nexport var simMapRef = function(sim_r, mapi, f) {\n  return __awaiter(void 0, void 0, void 0, function() {\n    return __generator(this, function(_b) {\n      switch (_b.label) {\n        case 0:\n          simMapLog(sim_r, f);\n          return [4 /*yield*/ , mapRef(sim_r.maps[mapi], f)];\n        case 1:\n          return [2 /*return*/ , _b.sent()];\n      }\n    });\n  });\n};\nexport var simMapSet = function(sim_r, mapi, f, nv) {\n  return __awaiter(void 0, void 0, void 0, function() {\n    return __generator(this, function(_b) {\n      switch (_b.label) {\n        case 0:\n          simMapLog(sim_r, f);\n          return [4 /*yield*/ , mapSet(sim_r.maps[mapi], f, nv)];\n        case 1:\n          return [2 /*return*/ , _b.sent()];\n      }\n    });\n  });\n};\nexport var simTokenNew = function(sim_r, n, s, u, m, p, d, ctr) {\n  sim_r.txns.push({ kind: 'tokenNew', n: n, s: s, u: u, m: m, p: p, d: d });\n  // XXX This is a hack... it is assumed that `ctr` is unique across tokens in a simulation block\n  return ctr;\n};\nexport var simContractNew = function(sim_r, cns, remote, ctr) {\n  sim_r.txns.push({ kind: 'contractNew', cns: cns, remote: remote });\n  // XXX This is a hack... it is assumed that `ctr` is unique across tokens in a simulation block\n  return ctr;\n};\nexport var simTokenBurn = function(sim_r, tok, amt) {\n  sim_r.txns.push({ kind: 'tokenBurn', tok: tok, amt: amt });\n};\nexport var simTokenDestroy = function(sim_r, tok) {\n  sim_r.txns.push({ kind: 'tokenDestroy', tok: tok });\n};\nexport var simTokenAccepted_ = function(sim_r, addr, tok) {\n  sim_r.txns.push({ kind: 'tokenAccepted', addr: addr, tok: tok });\n};\n//# sourceMappingURL=shared_backend.js.map\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}