{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}; // This can depend on the shared backend\n\n\nimport crypto from 'crypto';\nimport Timeout from 'await-timeout';\nimport ethers from 'ethers';\nimport { bigNumberify } from './CBR.mjs';\nimport util from 'util';\nimport { hexlify, checkedBigNumberify, bytesEq, assert, formatAssertInfo } from './shared_backend.mjs';\nimport { process } from './shim.mjs';\nexport { hexlify } from './shared_backend.mjs'; // This is dumb but it's how ESLint says to do it\n// `hasOwnProperty` is important for denying access to prototype fields\n// https://eslint.org/docs/rules/no-prototype-builtins\n\nexport var hasProp = function (o, p) {\n  return o && {}.hasOwnProperty.call(o, p);\n};\nexport var j2sf = function (x) {\n  // We're removing duplicated values, so we can remove cyclic references\n  var seen = [];\n\n  var rep = function (key, val) {\n    void key;\n\n    if (val != null && typeof val === \"object\") {\n      var idx = seen.indexOf(val);\n\n      if (idx >= 0) {\n        return \"@\".concat(idx);\n      }\n\n      seen.push(val);\n    }\n\n    return val;\n  };\n\n  return JSON.stringify(x, rep, 2);\n};\nexport var j2s = function (x) {\n  var xs = \"\".concat(x);\n\n  if (!(x && x._isBigNumber) && (xs === '{}' || xs.startsWith('[object'))) {\n    return j2sf(x);\n  }\n\n  return xs;\n};\nvar DEBUG = truthyEnv(process.env.REACH_DEBUG);\nexport var setDEBUG = function (b) {\n  if (b === false || b === true) {\n    DEBUG = b;\n  } else {\n    throw Error(\"Expected bool, got \".concat(j2s(b)));\n  }\n};\nexport var hideWarnings = function () {\n  return truthyEnv(process.env.REACH_NO_WARN);\n};\nexport var getDEBUG = function () {\n  return DEBUG;\n};\nexport var debug = function () {\n  var msgs = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    msgs[_i] = arguments[_i];\n  }\n\n  if (getDEBUG()) {\n    // Print arrays/objects in full instead of the default depth of 2\n    var betterMsgs = msgs.map(function (msg) {\n      return [\"object\", \"array\"].includes(typeof msg) && util && util.inspect instanceof Function ? util.inspect(msg, false, null, true) : msg;\n    });\n    void betterMsgs; // Print objects for indentation, colors, etc...\n\n    console.log.apply(console, __spreadArray([new Date(), \"DEBUG:\"], __read(msgs), false));\n  }\n};\n\nvar isUntaggedView = function (x) {\n  return 'ty' in x && 'decode' in x;\n};\n\nexport var stdVerifyContract = function (stdArgs, doVerify) {\n  return __awaiter(void 0, void 0, void 0, function () {\n    var getTrustedVerifyResult, setTrustedVerifyResult, r;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          getTrustedVerifyResult = stdArgs.getTrustedVerifyResult, setTrustedVerifyResult = stdArgs.setTrustedVerifyResult;\n          r = getTrustedVerifyResult();\n\n          if (r) {\n            return [2\n            /*return*/\n            , r];\n          }\n\n          return [4\n          /*yield*/\n          , doVerify()];\n\n        case 1:\n          r = _a.sent();\n          setTrustedVerifyResult(r);\n          return [2\n          /*return*/\n          , r];\n      }\n    });\n  });\n};\nexport var stdABIFilter = function (x) {\n  if (x.name && x.name.startsWith('_reach')) {\n    return false;\n  }\n\n  return true;\n};\nexport var stdGetABI = function (ABI) {\n  return function (isFull) {\n    return isFull ? ABI : ABI.filter(stdABIFilter);\n  };\n};\nexport var stdContract = function (stdContractArgs) {\n  var bin = stdContractArgs.bin,\n      getABI = stdContractArgs.getABI,\n      waitUntilTime = stdContractArgs.waitUntilTime,\n      waitUntilSecs = stdContractArgs.waitUntilSecs,\n      selfAddress = stdContractArgs.selfAddress,\n      iam = stdContractArgs.iam,\n      stdlib = stdContractArgs.stdlib,\n      setupView = stdContractArgs.setupView,\n      setupEvents = stdContractArgs.setupEvents,\n      _setup = stdContractArgs._setup,\n      givenInfoP = stdContractArgs.givenInfoP;\n\n  var _a = function () {\n    var _setInfo = function (info) {\n      throw Error(\"Cannot set info(\".concat(j2s(info), \") (i.e. deploy) when acc.contract called with contract info: You are trying to attach to a contract as the deployer, which is not possible.\"));\n      return;\n    };\n\n    if (givenInfoP !== undefined) {\n      return {\n        setInfo: _setInfo,\n        getInfo: function () {\n          return givenInfoP;\n        }\n      };\n    } else {\n      var beenSet_1 = false;\n\n      var _infoP_1 = new Promise(function (resolve) {\n        _setInfo = function (info) {\n          if (beenSet_1) {\n            throw Error(\"Cannot set info(\".concat(j2s(info), \") (i.e. deploy) twice\"));\n          }\n\n          resolve(info);\n          beenSet_1 = true;\n        };\n      });\n\n      return {\n        setInfo: _setInfo,\n        getInfo: function () {\n          return _infoP_1;\n        }\n      };\n    }\n  }(),\n      setInfo = _a.setInfo,\n      getInfo = _a.getInfo;\n\n  var trustedVerifyResult = undefined;\n\n  var getTrustedVerifyResult = function () {\n    return trustedVerifyResult;\n  };\n\n  var setTrustedVerifyResult = function (x) {\n    trustedVerifyResult = x;\n  };\n\n  var viewArgs = {\n    getInfo: getInfo,\n    setTrustedVerifyResult: setTrustedVerifyResult,\n    getTrustedVerifyResult: getTrustedVerifyResult\n  };\n\n  var setupArgs = __assign(__assign({}, viewArgs), {\n    setInfo: setInfo\n  });\n\n  var _initialize = function () {\n    var _a = _setup(setupArgs),\n        getContractInfo = _a.getContractInfo,\n        getContractAddress = _a.getContractAddress,\n        getContractCompanion = _a.getContractCompanion,\n        getBalance = _a.getBalance,\n        sendrecv = _a.sendrecv,\n        recv = _a.recv,\n        getCurrentStep = _a.getCurrentStep,\n        getState = _a.getState,\n        apiMapRef = _a.apiMapRef,\n        simTokenAccepted = _a.simTokenAccepted;\n\n    return {\n      selfAddress: selfAddress,\n      iam: iam,\n      stdlib: stdlib,\n      waitUntilTime: waitUntilTime,\n      waitUntilSecs: waitUntilSecs,\n      getContractInfo: getContractInfo,\n      getContractAddress: getContractAddress,\n      getContractCompanion: getContractCompanion,\n      getBalance: getBalance,\n      sendrecv: sendrecv,\n      recv: recv,\n      getCurrentStep: getCurrentStep,\n      getState: getState,\n      apiMapRef: apiMapRef,\n      simTokenAccepted: simTokenAccepted\n    };\n  };\n\n  var ctcC = {\n    _initialize: _initialize\n  };\n\n  var _b = setupView(viewArgs),\n      viewLib = _b.viewLib,\n      getView1 = _b.getView1;\n\n  var views_bin = bin._getViews({\n    reachStdlib: stdlib\n  }, viewLib);\n\n  var mkViews = function (isSafe) {\n    return objectMap(views_bin.infos, function (v, vm) {\n      return isUntaggedView(vm) ? getView1(views_bin.views, v, undefined, vm, isSafe) : objectMap(vm, function (k, vi) {\n        return getView1(views_bin.views, v, k, vi, isSafe);\n      });\n    });\n  };\n\n  var views = mkViews(true);\n  var unsafeViews = mkViews(false);\n  var participants = objectMap(bin._Participants, function (pn, p) {\n    void pn;\n    return function (io) {\n      return p(ctcC, io);\n    };\n  });\n\n  var mkApis = function (isSafe) {\n    if (isSafe === void 0) {\n      isSafe = false;\n    }\n\n    return objectMap(bin._APIs, function (an, am) {\n      var f = function (afn, ab) {\n        var mk = function (sep) {\n          return afn === undefined ? \"\".concat(an) : \"\".concat(an).concat(sep).concat(afn);\n        };\n\n        var bp = mk(\"_\");\n        delete participants[bp];\n        var bl = mk(\".\");\n        return function () {\n          var args = [];\n\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n\n          var terminal = {\n            terminated: bl\n          };\n          var theResolve;\n          var theReject;\n          var p = new Promise(function (resolve, reject) {\n            theResolve = resolve;\n            theReject = reject;\n          });\n\n          var fail = function (err) {\n            if (isSafe) {\n              theResolve(['None', null]);\n            } else {\n              theReject(err);\n            }\n          };\n\n          debug(\"\".concat(bl, \": start\"), args);\n          ab(ctcC, {\n            \"in\": function () {\n              debug(\"\".concat(bl, \": in\"), args);\n              return args;\n            },\n            \"out\": function (oargs, res) {\n              debug(\"\".concat(bl, \": out\"), oargs, res);\n              theResolve(isSafe ? ['Some', res] : res);\n              throw terminal;\n            }\n          })[\"catch\"](function (err) {\n            if (Object.is(err, terminal)) {\n              debug(\"\".concat(bl, \": done\"));\n            } else {\n              fail(new Error(\"\".concat(bl, \" errored with \").concat(err)));\n            }\n          }).then(function (res) {\n            fail(new Error(\"\".concat(bl, \" returned with \").concat(j2s(res))));\n          });\n          return p;\n        };\n      };\n\n      return typeof am === 'object' ? objectMap(am, f) : f(undefined, am);\n    });\n  };\n\n  var apis = mkApis(false);\n  var safeApis = mkApis(true);\n\n  var eventMap = bin._getEvents({\n    reachStdlib: stdlib\n  });\n\n  var createEventStream = setupEvents(viewArgs).createEventStream;\n  var events = objectMap(eventMap, function (k, v) {\n    return Array.isArray(v) // untagged\n    ? createEventStream(k, v) : objectMap(v, function (kp, vp) {\n      return createEventStream(k + \"_\" + kp, vp);\n    });\n  });\n  return __assign(__assign({}, ctcC), {\n    getABI: getABI,\n    getInfo: getInfo,\n    getContractAddress: function () {\n      return _initialize().getContractAddress();\n    },\n    participants: participants,\n    p: participants,\n    views: views,\n    v: views,\n    getViews: function () {\n      console.log(\"WARNING: ctc.getViews() is deprecated; use ctc.views or ctc.v instead.\");\n      return views;\n    },\n    unsafeViews: unsafeViews,\n    apis: apis,\n    a: apis,\n    safeApis: safeApis,\n    events: events,\n    e: events\n  });\n};\nexport var stdAccount_unsupported = function (conn) {\n  var setGasLimit = function (ngl) {\n    void ngl;\n    console.warn(\"setGasLimit not supported on \".concat(conn));\n  };\n\n  var getGasLimit = function () {\n    console.warn(\"getGasLimit not supported on \".concat(conn));\n    return bigNumberify(0);\n  };\n\n  var setStorageLimit = function (ngl) {\n    void ngl;\n    console.warn(\"setStorageLimit not supported on \".concat(conn));\n  };\n\n  var getStorageLimit = function () {\n    console.warn(\"getStorageLimit not supported on \".concat(conn));\n    return bigNumberify(0);\n  };\n\n  return {\n    setGasLimit: setGasLimit,\n    getGasLimit: getGasLimit,\n    setStorageLimit: setStorageLimit,\n    getStorageLimit: getStorageLimit\n  };\n};\nexport var stdAccount = function (orig) {\n  return __assign(__assign({}, orig), {\n    deploy: function (bin) {\n      console.log(\"WARNING: acc.deploy(bin) is deprecated; use acc.contract(bin) instead. Deployment is implied by the first publication.\");\n      return orig.contract(bin, undefined);\n    },\n    attach: function (bin, ctcInfoP) {\n      console.log(\"WARNING: acc.attach(bin, info) is deprecated; use acc.contract(bin, info) instead. Attachment is implied by reception of the first publication.\");\n      return orig.contract(bin, ctcInfoP);\n    }\n  });\n};\n/**\n * @description Create a getter/setter, where the getter defaults to memoizing a thunk\n */\n\nexport function replaceableThunk(thunk) {\n  var called = false;\n  var res = null;\n\n  function get() {\n    if (!called) {\n      called = true;\n      res = thunk();\n    }\n\n    return res;\n  }\n\n  function set(val) {\n    if (called) {\n      throw Error(\"Cannot re-set value once already set\");\n    }\n\n    res = val;\n    called = true;\n  }\n\n  return [get, set];\n}\n/**\n * @description Only perform side effects from thunk on the first call.\n */\n\nexport function memoizeThunk(thunk) {\n  return replaceableThunk(thunk)[0];\n}\n/**\n * @description ascLabels[i] = label; labelMap[label] = i;\n */\n\nexport var labelMaps = function (co) {\n  var ascLabels = Object.keys(co).sort();\n  var labelMap = {};\n\n  for (var i in ascLabels) {\n    labelMap[ascLabels[i]] = parseInt(i);\n  }\n\n  return {\n    ascLabels: ascLabels,\n    labelMap: labelMap\n  };\n};\n/** @description Check that a stringy env value doesn't look falsy. */\n\nexport function truthyEnv(v) {\n  if (!v) return false;\n  return !['0', 'false', 'f', '#f', 'no', 'off', 'n', ''].includes(v && v.toLowerCase && v.toLowerCase());\n}\nexport var envDefault = function (v, d) {\n  return v === undefined || v === null ? d : v;\n};\nexport var envDefaultNoEmpty = function (v, d) {\n  var v2 = envDefault(v, d);\n  return v2 === '' ? d : v2;\n};\nexport var makeDigest = function (mode, prep) {\n  return function (t, v) {\n    void hexlify; // const args = [t, v];\n    // debug('digest(', args, ') =>');\n\n    var kekCat = prep(t, v); // debug('digest(', args, ') => internal(', hexlify(kekCat), ')');\n\n    var f = mode === 'keccak256' ? ethers.utils.keccak256 : ethers.utils.sha256;\n    var r = f(kekCat);\n    debug('digest', {\n      mode: mode,\n      prep: prep,\n      t: t,\n      v: v,\n      kekCat: kekCat,\n      f: f,\n      r: r\n    }); // debug('keccak(', args, ') => internal(', hexlify(kekCat), ') => ', r);\n\n    return r;\n  };\n};\nexport var hexToString = ethers.utils.toUtf8String;\n\nvar byteToHex = function (b) {\n  return (b & 0xFF).toString(16).padStart(2, '0');\n};\n\nvar byteArrayToHex = function (b) {\n  return Array.from(b, byteToHex).join('');\n};\n\nvar hexTo0x = function (h) {\n  return '0x' + h.replace(/^0x/, '');\n};\n\nexport var hexToBigNumber = function (h) {\n  return bigNumberify(hexTo0x(h));\n};\nexport var makeRandom = function (width) {\n  var randomUInt = function () {\n    return hexToBigNumber(byteArrayToHex(crypto.randomBytes(width)));\n  };\n\n  var hasRandom = {\n    random: randomUInt\n  };\n  return {\n    randomUInt: randomUInt,\n    hasRandom: hasRandom\n  };\n};\n\nvar bnSqrt = function (y) {\n  var acc = [y, y.div(2).add(1)];\n  var ans = undefined;\n\n  while (ans === undefined) {\n    var _a = __read(acc, 2),\n        z = _a[0],\n        x = _a[1];\n\n    if (x.lt(2)) {\n      ans = x;\n    } else if (x.lt(z)) {\n      acc = [x, y.div(x).add(x).div(2)];\n    } else {\n      ans = x;\n    }\n  }\n\n  return ans;\n};\n\nexport var UInt256_max = ethers.BigNumber.from(2).pow(256).sub(1);\nexport var makeArith = function (m) {\n  var checkB = function (x) {\n    return checkedBigNumberify(\"internal\", UInt256_max, x);\n  };\n\n  var checkM = function (x) {\n    return checkedBigNumberify(\"internal\", m, x);\n  };\n\n  var doBN2 = function (f, a, b) {\n    return a[f](b);\n  };\n\n  var getCheck = function (w) {\n    return w ? checkB : checkM;\n  };\n\n  var cast = function (from, to, x, trunc) {\n    var checkF = getCheck(from);\n    var checkT = getCheck(to);\n    var bigX = bigNumberify(x);\n    var maybeTruncated = trunc ? bigX.and(m) : bigX;\n    return checkT(checkF(maybeTruncated));\n  };\n\n  var liftX2 = function (check) {\n    return function (f) {\n      return function (a, b) {\n        return check(doBN2(f, bigNumberify(a), bigNumberify(b)));\n      };\n    };\n  };\n\n  var liftB = liftX2(checkB);\n  var liftM = liftX2(checkM);\n\n  var doBN1 = function (f, a) {\n    if (f === 'sqrt') {\n      return bnSqrt(a);\n    } else {\n      throw Error('impossible BNOp1');\n    }\n  };\n\n  var liftX1 = function (check) {\n    return function (f) {\n      return function (a) {\n        return check(doBN1(f, bigNumberify(a)));\n      };\n    };\n  };\n\n  var liftB1 = liftX1(checkB);\n  var liftM1 = liftX1(checkM);\n  var add = liftM('add');\n  var sub = liftM('sub');\n  var mod = liftM('mod');\n  var mul = liftM('mul');\n  var div = liftM('div');\n  var band = liftM('and');\n  var bior = liftM('or');\n  var bxor = liftM('xor');\n  var sqrt = liftM1('sqrt');\n  var add256 = liftB('add');\n  var sub256 = liftB('sub');\n  var mod256 = liftB('mod');\n  var mul256 = liftB('mul');\n  var div256 = liftB('div');\n  var band256 = liftB('and');\n  var bior256 = liftB('or');\n  var bxor256 = liftB('xor');\n  var sqrt256 = liftB1('sqrt');\n\n  var muldiv = function (a, b, c) {\n    var prod = bigNumberify(a).mul(bigNumberify(b));\n    return checkM(prod.div(bigNumberify(c)));\n  };\n\n  return {\n    add: add,\n    sub: sub,\n    mod: mod,\n    mul: mul,\n    div: div,\n    band: band,\n    bior: bior,\n    bxor: bxor,\n    sqrt: sqrt,\n    add256: add256,\n    sub256: sub256,\n    mod256: mod256,\n    mul256: mul256,\n    div256: div256,\n    band256: band256,\n    bior256: bior256,\n    bxor256: bxor256,\n    sqrt256: sqrt256,\n    cast: cast,\n    muldiv: muldiv\n  };\n};\nexport var argsSlice = function (args, cnt) {\n  return cnt == 0 ? [] : args.slice(-1 * cnt);\n};\nexport var argsSplit = function (args, cnt) {\n  return cnt == 0 ? [args, []] : [args.slice(0, args.length - cnt), args.slice(-1 * cnt)];\n};\nexport var objectMap = function (object, mapFn) {\n  return Object.keys(object).reduce(function (result, key) {\n    result[key] = mapFn(key, object[key]);\n    return result;\n  }, {});\n};\nexport var mkAddressEq = function (T_Address) {\n  return function (x, y) {\n    return bytesEq(T_Address.canonicalize(x), T_Address.canonicalize(y));\n  };\n};\nexport var ensureConnectorAvailable = function (bin, conn, jsVer, connVer) {\n  checkVersion(bin._backendVersion, jsVer, \"JavaScript backend\");\n  var connectors = bin._Connectors;\n  var conn_bin = connectors[conn];\n\n  if (!conn_bin) {\n    throw new Error(\"The application was not compiled for the \".concat(conn, \" connector, only: \").concat(Object.keys(connectors)));\n  }\n\n  checkVersion(conn_bin.version, connVer, \"\".concat(conn, \" backend\"));\n};\nexport var checkVersion = function (actual, expected, label) {\n  if (actual !== expected) {\n    var older = actual === undefined || actual < expected;\n    var more = older ? \"update your compiler and recompile!\" : \"update your standard library and rerun!\";\n    throw Error(\"This Reach compiled \".concat(label, \" does not match the expectations of this Reach standard library: expected \").concat(expected, \", but got \").concat(actual, \"; \").concat(more));\n  }\n};\n\nvar argHelper = function (xs, f, op) {\n  if (xs.length == 0) {\n    return undefined;\n  }\n\n  return xs.reduce(function (accum, x) {\n    return op(f(x), f(accum)) ? x : accum;\n  }, xs[0]);\n};\n\nexport var argMax = function (xs, f) {\n  return argHelper(xs, f, function (a, b) {\n    return a > b;\n  });\n};\nexport var argMin = function (xs, f) {\n  return argHelper(xs, f, function (a, b) {\n    return a < b;\n  });\n};\nexport var make_newTestAccounts = function (newTestAccount) {\n  var makeArr = function (k) {\n    return new Array(k).fill(1);\n  };\n\n  var parallel = function (k, bal) {\n    return Promise.all(makeArr(k).map(function (_) {\n      return newTestAccount(bal);\n    }));\n  };\n\n  var serial = function (k, bal) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var arr, i, _a, _b;\n\n      return __generator(this, function (_c) {\n        switch (_c.label) {\n          case 0:\n            arr = [];\n            i = 0;\n            _c.label = 1;\n\n          case 1:\n            if (!(i < k)) return [3\n            /*break*/\n            , 4];\n            _b = (_a = arr).push;\n            return [4\n            /*yield*/\n            , newTestAccount(bal)];\n\n          case 2:\n            _b.apply(_a, [_c.sent()]);\n\n            _c.label = 3;\n\n          case 3:\n            i++;\n            return [3\n            /*break*/\n            , 1];\n\n          case 4:\n            return [2\n            /*return*/\n            , arr];\n        }\n      });\n    });\n  };\n\n  return {\n    parallel: parallel,\n    serial: serial\n  };\n};\nexport var make_waitUntilX = function (label, getCurrent, step) {\n  return function (target, onProgress) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var onProg, current, notify;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            onProg = onProgress || function () {};\n\n            return [4\n            /*yield*/\n            , getCurrent()];\n\n          case 1:\n            current = _a.sent();\n\n            notify = function () {\n              var o = {\n                current: current,\n                target: target\n              };\n              debug(\"waitUntilX:\", label, o);\n              onProg(o);\n            };\n\n            _a.label = 2;\n\n          case 2:\n            if (!current.lt(target)) return [3\n            /*break*/\n            , 4];\n            debug('waitUntilX', {\n              label: label,\n              current: current,\n              target: target\n            });\n            return [4\n            /*yield*/\n            , step(current.add(1))];\n\n          case 3:\n            current = _a.sent();\n            notify();\n            return [3\n            /*break*/\n            , 2];\n\n          case 4:\n            notify();\n            return [2\n            /*return*/\n            , current];\n        }\n      });\n    });\n  };\n};\nexport var checkTimeout = function (runningIsolated, getTimeSecs, timeoutAt, nowTime) {\n  return __awaiter(void 0, void 0, void 0, function () {\n    var _a, mode, val, nowSecs, e_1, nowSecs;\n\n    return __generator(this, function (_b) {\n      switch (_b.label) {\n        case 0:\n          debug('checkTimeout', {\n            timeoutAt: timeoutAt,\n            nowTime: nowTime\n          });\n\n          if (!timeoutAt) {\n            return [2\n            /*return*/\n            , false];\n          }\n\n          _a = __read(timeoutAt, 2), mode = _a[0], val = _a[1];\n          if (!(mode === 'time')) return [3\n          /*break*/\n          , 1];\n          return [2\n          /*return*/\n          , val.lte(nowTime)];\n\n        case 1:\n          if (!(mode === 'secs')) return [3\n          /*break*/\n          , 6];\n          _b.label = 2;\n\n        case 2:\n          _b.trys.push([2, 4,, 5]);\n\n          return [4\n          /*yield*/\n          , getTimeSecs(nowTime)];\n\n        case 3:\n          nowSecs = _b.sent();\n          return [2\n          /*return*/\n          , val.lte(nowSecs)];\n\n        case 4:\n          e_1 = _b.sent();\n          debug('checkTimeout', 'err', \"\".concat(e_1));\n\n          if (runningIsolated()) {\n            nowSecs = Math.floor(Date.now() / 1000);\n            debug('checkTimeout', 'isolated', val.toString(), nowSecs);\n            return [2\n            /*return*/\n            , val.lt(nowSecs - 1)];\n          }\n\n          return [2\n          /*return*/\n          , false];\n\n        case 5:\n          return [3\n          /*break*/\n          , 7];\n\n        case 6:\n          throw new Error(\"invalid TimeArg mode\");\n\n        case 7:\n          return [2\n          /*return*/\n          ];\n      }\n    });\n  });\n};\n\nvar neverTrue = function (r) {\n  return __awaiter(void 0, void 0, void 0, function () {\n    return __generator(this, function (_a) {\n      return [2\n      /*return*/\n      , (void r, false)];\n    });\n  });\n};\n\n;\n;\n;\nexport var makeEventQueue = function (ctorArgs) {\n  var raw2proc = ctorArgs.raw2proc,\n      alwaysIgnored = ctorArgs.alwaysIgnored,\n      getTxns = ctorArgs.getTxns,\n      getTxnTime = ctorArgs.getTxnTime;\n  var initArgs = undefined;\n  var ptxns = [];\n  var ctime = bigNumberify(0);\n  var customIgnore = [];\n\n  var isInited = function () {\n    return initArgs !== undefined;\n  };\n\n  var init = function (args) {\n    assert(initArgs === undefined, \"init: must be uninitialized\");\n    initArgs = args;\n  };\n\n  var pushIgnore = function (pred) {\n    assert(initArgs !== undefined, \"pushIgnore: must be initialized\");\n    customIgnore.push(pred);\n  };\n\n  var notIgnored = function (txn) {\n    return !alwaysIgnored(txn);\n  };\n\n  var peq = function (lab, didTimeout, limsug) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var dhead, updateCtime, howMany, _loop_1, state_1;\n\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            dhead = \"\".concat(lab, \" peq\");\n\n            updateCtime = function (ntime) {\n              if (ctime.lt(ntime)) {\n                debug(dhead, 'updating ctime', {\n                  ctime: ctime,\n                  ntime: ntime\n                });\n                ctime = ntime;\n              }\n\n              return ntime;\n            };\n\n            if (initArgs === undefined) {\n              throw Error(\"\".concat(dhead, \": not initialized\"));\n            }\n\n            howMany = 0;\n\n            _loop_1 = function () {\n              var _b, txns, gtime, r_1, cmpTxn, cis, ci, t, _c;\n\n              return __generator(this, function (_d) {\n                switch (_d.label) {\n                  case 0:\n                    return [4\n                    /*yield*/\n                    , getTxns(dhead, initArgs, ctime, howMany++, limsug)];\n\n                  case 1:\n                    _b = _d.sent(), txns = _b.txns, gtime = _b.gtime;\n\n                    if (txns.length === 0 && gtime) {\n                      updateCtime(gtime);\n                    } else {\n                      r_1 = function (x) {\n                        return updateCtime(getTxnTime(x));\n                      };\n\n                      cmpTxn = function (x, y) {\n                        return r_1(x).sub(r_1(y)).toNumber();\n                      };\n\n                      txns.sort(cmpTxn);\n\n                      if (txns.length === 1) {\n                        r_1(txns[0]);\n                      }\n\n                      txns = txns.filter(notIgnored);\n                    }\n\n                    cis = customIgnore;\n\n                    while (txns.length > 0 && cis.length > 0) {\n                      ci = cis[0];\n                      cis.shift();\n                      t = txns[0];\n                      txns.shift();\n\n                      if (!ci(t)) {\n                        throw Error(\"\".concat(dhead, \" customIgnore present, \").concat(ci, \", but top txn did not match \").concat(j2s(t)));\n                      } else {\n                        debug(dhead, \"ignored\", ci, t);\n                      }\n                    }\n\n                    _c = txns.length === 0;\n                    if (!_c) return [3\n                    /*break*/\n                    , 3];\n                    return [4\n                    /*yield*/\n                    , didTimeout(ctime)];\n\n                  case 2:\n                    _c = _d.sent();\n                    _d.label = 3;\n\n                  case 3:\n                    if (_c) {\n                      return [2\n                      /*return*/\n                      , {\n                        value: {\n                          timeout: true,\n                          time: ctime\n                        }\n                      }];\n                    }\n\n                    ptxns = txns.map(raw2proc);\n                    return [2\n                    /*return*/\n                    ];\n                }\n              });\n            };\n\n            _a.label = 1;\n\n          case 1:\n            if (!(ptxns.length === 0)) return [3\n            /*break*/\n            , 3];\n            return [5\n            /*yield**/\n            , _loop_1()];\n\n          case 2:\n            state_1 = _a.sent();\n            if (typeof state_1 === \"object\") return [2\n            /*return*/\n            , state_1.value];\n            return [3\n            /*break*/\n            , 1];\n\n          case 3:\n            return [2\n            /*return*/\n            , {\n              timeout: false,\n              txn: ptxns[0]\n            }];\n        }\n      });\n    });\n  };\n\n  var deq = function (dhead, limsug) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var r;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , peq(dhead, neverTrue, limsug)];\n\n          case 1:\n            r = _a.sent();\n\n            if (r.timeout) {\n              throw Error('impossible');\n            }\n\n            ptxns.shift();\n            return [2\n            /*return*/\n            , r.txn];\n        }\n      });\n    });\n  };\n\n  return {\n    isInited: isInited,\n    init: init,\n    peq: peq,\n    deq: deq,\n    pushIgnore: pushIgnore\n  };\n};\n;\nexport var makeEventStream = function (args) {\n  var eq = args.eq,\n      getTxnTime = args.getTxnTime,\n      sync = args.sync,\n      getNetworkTime = args.getNetworkTime,\n      getLogs = args.getLogs,\n      parseLog = args.parseLog;\n  var time = bigNumberify(0);\n  var logs = [];\n\n  var seek = function (t) {\n    assert(time.lt(t), 'seek must seek future');\n    debug(\"EventStream::seek\", t);\n    time = t;\n    logs = [];\n  };\n\n  var next = function () {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var dhead, parsedLog, txn, cr, l;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , sync()];\n\n          case 1:\n            _a.sent();\n\n            dhead = \"EventStream::next\";\n            parsedLog = undefined;\n            _a.label = 2;\n\n          case 2:\n            if (!(parsedLog === undefined)) return [3\n            /*break*/\n            , 6];\n            _a.label = 3;\n\n          case 3:\n            if (!(logs.length === 0)) return [3\n            /*break*/\n            , 5];\n            return [4\n            /*yield*/\n            , eq.deq(dhead)];\n\n          case 4:\n            txn = _a.sent();\n            debug(dhead, {\n              txn: txn\n            });\n            cr = getTxnTime(txn);\n\n            if (cr.gte(time)) {\n              time = cr;\n              logs = getLogs(txn);\n              debug(dhead, {\n                time: time,\n                logs: logs\n              });\n            }\n\n            return [3\n            /*break*/\n            , 3];\n\n          case 5:\n            l = logs[0];\n            logs.shift();\n            parsedLog = parseLog(l);\n            debug(dhead, {\n              parsedLog: parsedLog,\n              l: l\n            });\n            return [3\n            /*break*/\n            , 2];\n\n          case 6:\n            debug(dhead, 'ret');\n            return [2\n            /*return*/\n            , {\n              when: time,\n              what: parsedLog\n            }];\n        }\n      });\n    });\n  };\n\n  var seekNow = function () {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var _a;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            _a = seek;\n            return [4\n            /*yield*/\n            , getNetworkTime()];\n\n          case 1:\n            return [2\n            /*return*/\n            , _a.apply(void 0, [_b.sent()])];\n        }\n      });\n    });\n  };\n\n  var lastTime = function () {\n    return __awaiter(void 0, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        return [2\n        /*return*/\n        , time];\n      });\n    });\n  };\n\n  var monitor = function (onEvent) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var _a;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            if (!true) return [3\n            /*break*/\n            , 2];\n            _a = onEvent;\n            return [4\n            /*yield*/\n            , next()];\n\n          case 1:\n            _a.apply(void 0, [_b.sent()]);\n\n            return [3\n            /*break*/\n            , 0];\n\n          case 2:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  return {\n    lastTime: lastTime,\n    seek: seek,\n    seekNow: seekNow,\n    monitor: monitor,\n    next: next\n  };\n};\nexport function getQueryLowerBound() {\n  console.log(\"WARNING: getQueryLowerBound() is deprecated and does nothing.\");\n  return bigNumberify(0);\n}\n;\nexport function setQueryLowerBound(x) {\n  void x;\n  console.log(\"WARNING: setQueryLowerBound() is deprecated and does nothing.\");\n}\n;\n\nvar makePromise = function () {\n  var r = function (a) {\n    void a;\n    throw new Error(\"promise never initialized\");\n  };\n\n  var p = new Promise(function (resolve) {\n    r = resolve;\n  });\n  return [p, r];\n};\n\nvar Signal =\n/** @class */\nfunction () {\n  function Signal() {\n    var _a;\n\n    _a = __read(makePromise(), 2), this.p = _a[0], this.r = _a[1];\n  }\n\n  Signal.prototype.wait = function () {\n    return this.p;\n  };\n\n  Signal.prototype.notify = function () {\n    this.r(true);\n  };\n\n  return Signal;\n}();\n\nexport { Signal };\n;\n\nvar Lock =\n/** @class */\nfunction () {\n  function Lock() {\n    this.locked = false;\n  }\n\n  Lock.prototype.acquire = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var x;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            x = 1;\n            _a.label = 1;\n\n          case 1:\n            if (!this.locked) return [3\n            /*break*/\n            , 3];\n            return [4\n            /*yield*/\n            , Timeout.set(Math.min(512, x))];\n\n          case 2:\n            _a.sent();\n\n            x = x * 2;\n            return [3\n            /*break*/\n            , 1];\n\n          case 3:\n            this.locked = true;\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  Lock.prototype.release = function () {\n    this.locked = false;\n  };\n\n  Lock.prototype.runWith = function (f) {\n    return __awaiter(this, void 0, void 0, function () {\n      var r, e_2;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.acquire()];\n\n          case 1:\n            _a.sent();\n\n            _a.label = 2;\n\n          case 2:\n            _a.trys.push([2, 4,, 5]);\n\n            return [4\n            /*yield*/\n            , f()];\n\n          case 3:\n            r = _a.sent();\n            this.release();\n            return [2\n            /*return*/\n            , r];\n\n          case 4:\n            e_2 = _a.sent();\n            this.release();\n            throw e_2;\n\n          case 5:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  return Lock;\n}();\n\nexport { Lock };\nexport function isNone(m) {\n  return m.length === 0;\n}\nexport function isSome(m) {\n  return !isNone(m);\n}\nexport var Some = function (m) {\n  return [m];\n};\nexport var None = [];\nexport var retryLoop = function (lab, f) {\n  return __awaiter(void 0, void 0, void 0, function () {\n    var retries, e_3;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          retries = 0;\n          _a.label = 1;\n\n        case 1:\n          if (!true) return [3\n          /*break*/\n          , 6];\n          _a.label = 2;\n\n        case 2:\n          _a.trys.push([2, 4,, 5]);\n\n          return [4\n          /*yield*/\n          , f()];\n\n        case 3:\n          return [2\n          /*return*/\n          , _a.sent()];\n\n        case 4:\n          e_3 = _a.sent();\n          console.log(\"retryLoop\", {\n            lab: lab,\n            retries: retries,\n            e: e_3\n          });\n          retries++;\n          return [3\n          /*break*/\n          , 5];\n\n        case 5:\n          return [3\n          /*break*/\n          , 1];\n\n        case 6:\n          return [2\n          /*return*/\n          ];\n      }\n    });\n  });\n};\nexport var makeSigningMonitor = function () {\n  var mon = undefined;\n\n  var setSigningMonitor = function (h) {\n    mon = h;\n  };\n\n  var notifySend = function (e, pre) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var _a, post, postr_1, notifyComplete;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            if (!mon) return [3\n            /*break*/\n            , 2];\n            _a = __read(makePromise(), 2), post = _a[0], postr_1 = _a[1];\n            mon(e, pre, post);\n\n            notifyComplete = function (pb) {\n              return __awaiter(void 0, void 0, void 0, function () {\n                var b;\n                return __generator(this, function (_a) {\n                  switch (_a.label) {\n                    case 0:\n                      return [4\n                      /*yield*/\n                      , pb];\n\n                    case 1:\n                      b = _a.sent();\n                      postr_1(b);\n                      return [2\n                      /*return*/\n                      , b];\n                  }\n                });\n              });\n            };\n\n            return [4\n            /*yield*/\n            , pre];\n\n          case 1:\n            return [2\n            /*return*/\n            , [_b.sent(), notifyComplete]];\n\n          case 2:\n            return [4\n            /*yield*/\n            , pre];\n\n          case 3:\n            return [2\n            /*return*/\n            , [_b.sent(), function (x) {\n              return x;\n            }]];\n        }\n      });\n    });\n  };\n\n  return [setSigningMonitor, notifySend];\n};\n/** @example lpad('asdf', '0', 6); // => '00asdf' */\n\nvar lpad = function (str, padChar, nChars) {\n  var padding = padChar.repeat(Math.max(nChars - str.length, 0));\n  return padding + str;\n};\n/** @example rdrop('asfdfff', 'f'); // => 'asfd' */\n\n\nvar rdrop = function (str, char) {\n  while (str[str.length - 1] === char) {\n    str = str.slice(0, str.length - 1);\n  }\n\n  return str;\n};\n/** @example ldrop('007', '0'); // => '7' */\n\n\nvar ldrop = function (str, char) {\n  while (str[0] === char) {\n    str = str.slice(1);\n  }\n\n  return str;\n}; // Helper to<BigNumber> -> string formatting function used in a couple of places\n// amt = the number to format\n// decimals = number of digits from the right to put the decimal point\n// splitValue = number of digits to keep after the decimal point\n// Example: handleFormat(1234567, 4, 2) => \"123.45\"\n\n\nexport var handleFormat = function (amt, decimals, splitValue) {\n  if (splitValue === void 0) {\n    splitValue = 6;\n  }\n\n  if (!(Number.isInteger(decimals) && 0 <= decimals)) {\n    throw Error(\"Expected decimals to be a nonnegative integer, but got \".concat(decimals, \".\"));\n  }\n\n  if (!(Number.isInteger(splitValue) && 0 <= splitValue)) {\n    throw Error(\"Expected split value to be a nonnegative integer, but got \".concat(decimals, \".\"));\n  }\n\n  var amtStr = bigNumberify(amt).toString();\n  var splitAt = Math.max(amtStr.length - splitValue, 0);\n  var lPredropped = amtStr.slice(0, splitAt);\n  var l = ldrop(lPredropped, '0') || '0';\n\n  if (decimals === 0) {\n    return l;\n  }\n\n  var rPre = lpad(amtStr.slice(splitAt), '0', splitValue);\n  var rSliced = rPre.slice(0, decimals);\n  var r = rdrop(rSliced, '0');\n  return r ? \"\".concat(l, \".\").concat(r) : l;\n};\nexport var formatWithDecimals = function (amt, decimals) {\n  return handleFormat(amt, decimals, decimals);\n};\nexport var apiStateMismatchError = function (bin, es, as) {\n  var formatLoc = function (s) {\n    return formatAssertInfo(bin._stateSourceMap[s.toNumber()]);\n  };\n\n  var msg = function (s, l) {\n    return \"\\nState \".concat(s, \" corresponds to the commit() at \").concat(l);\n  };\n\n  var el = Array.isArray(es) ? es.map(function (s) {\n    return msg(s, formatLoc(s));\n  }) : msg(es, formatLoc(es));\n  var al = formatLoc(as);\n  var fmtEs = Array.isArray(es) ? \"[\" + es + \"]\" : es;\n  return Error(\"Expected the DApp to be in state(s) \".concat(fmtEs, \", but it was actually in state \").concat(as, \".\\n\") + el + msg(as, al) + (el == al ? \"\\n(This means that the commit() is in the continuation of impure control-flow.)\" : \"\"));\n};\nexport var makeParseCurrency = function (defaultDecs) {\n  return function (amt, decimals) {\n    if (decimals === void 0) {\n      decimals = defaultDecs;\n    }\n\n    if (!(Number.isInteger(decimals) && 0 <= decimals)) {\n      throw Error(\"Expected decimals to be a nonnegative integer, but got \".concat(decimals, \".\"));\n    }\n\n    var _a = __read(amt.toString().split('.')),\n        amtL = _a[0],\n        amtR = _a[1],\n        amtMore = _a.slice(2);\n\n    if (amtMore.length > 0) {\n      throw Error(\"malformed input: parseCurrency('\".concat(amt, \"')\"));\n    }\n\n    var amtStr = \"\".concat(amtL, \".\").concat((amtR || '').slice(0, decimals));\n    return bigNumberify(ethers.utils.parseUnits(amtStr, decimals));\n  };\n};","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","v","op","TypeError","pop","push","__read","o","m","r","ar","error","__spreadArray","to","from","pack","l","Array","slice","concat","crypto","Timeout","ethers","bigNumberify","util","hexlify","checkedBigNumberify","bytesEq","assert","formatAssertInfo","process","hasProp","j2sf","x","seen","rep","key","val","idx","indexOf","JSON","stringify","j2s","xs","_isBigNumber","startsWith","DEBUG","truthyEnv","env","REACH_DEBUG","setDEBUG","b","Error","hideWarnings","REACH_NO_WARN","getDEBUG","debug","msgs","_i","betterMsgs","map","msg","includes","inspect","Function","console","log","Date","isUntaggedView","stdVerifyContract","stdArgs","doVerify","getTrustedVerifyResult","setTrustedVerifyResult","_a","stdABIFilter","name","stdGetABI","ABI","isFull","filter","stdContract","stdContractArgs","bin","getABI","waitUntilTime","waitUntilSecs","selfAddress","iam","stdlib","setupView","setupEvents","_setup","givenInfoP","_setInfo","info","undefined","setInfo","getInfo","beenSet_1","_infoP_1","trustedVerifyResult","viewArgs","setupArgs","_initialize","getContractInfo","getContractAddress","getContractCompanion","getBalance","sendrecv","recv","getCurrentStep","getState","apiMapRef","simTokenAccepted","ctcC","_b","viewLib","getView1","views_bin","_getViews","reachStdlib","mkViews","isSafe","objectMap","infos","vm","views","k","vi","unsafeViews","participants","_Participants","pn","io","mkApis","_APIs","an","am","afn","ab","mk","sep","bp","bl","args","terminal","terminated","theResolve","theReject","fail","err","oargs","res","is","apis","safeApis","eventMap","_getEvents","createEventStream","events","isArray","kp","vp","getViews","a","stdAccount_unsupported","conn","setGasLimit","ngl","warn","getGasLimit","setStorageLimit","getStorageLimit","stdAccount","orig","deploy","contract","attach","ctcInfoP","replaceableThunk","thunk","called","get","set","memoizeThunk","labelMaps","co","ascLabels","keys","sort","labelMap","parseInt","toLowerCase","envDefault","d","envDefaultNoEmpty","v2","makeDigest","mode","prep","kekCat","utils","keccak256","sha256","hexToString","toUtf8String","byteToHex","toString","padStart","byteArrayToHex","join","hexTo0x","h","replace","hexToBigNumber","makeRandom","width","randomUInt","randomBytes","hasRandom","random","bnSqrt","acc","div","add","ans","z","lt","UInt256_max","BigNumber","pow","sub","makeArith","checkB","checkM","doBN2","getCheck","w","cast","trunc","checkF","checkT","bigX","maybeTruncated","and","liftX2","check","liftB","liftM","doBN1","liftX1","liftB1","liftM1","mod","mul","band","bior","bxor","sqrt","add256","sub256","mod256","mul256","div256","band256","bior256","bxor256","sqrt256","muldiv","c","prod","argsSlice","cnt","argsSplit","object","mapFn","reduce","mkAddressEq","T_Address","canonicalize","ensureConnectorAvailable","jsVer","connVer","checkVersion","_backendVersion","connectors","_Connectors","conn_bin","version","actual","expected","older","more","argHelper","accum","argMax","argMin","make_newTestAccounts","newTestAccount","makeArr","fill","parallel","bal","all","serial","arr","_c","make_waitUntilX","getCurrent","target","onProgress","onProg","current","notify","checkTimeout","runningIsolated","getTimeSecs","timeoutAt","nowTime","nowSecs","e_1","lte","Math","floor","now","neverTrue","makeEventQueue","ctorArgs","raw2proc","alwaysIgnored","getTxns","getTxnTime","initArgs","ptxns","ctime","customIgnore","isInited","init","pushIgnore","pred","notIgnored","txn","peq","lab","didTimeout","limsug","dhead","updateCtime","howMany","_loop_1","state_1","ntime","txns","gtime","r_1","cmpTxn","cis","ci","_d","toNumber","shift","timeout","time","deq","makeEventStream","eq","sync","getNetworkTime","getLogs","parseLog","logs","seek","parsedLog","cr","gte","when","what","seekNow","lastTime","monitor","onEvent","getQueryLowerBound","setQueryLowerBound","makePromise","Signal","wait","Lock","locked","acquire","min","release","runWith","e_2","isNone","isSome","Some","None","retryLoop","retries","e_3","makeSigningMonitor","mon","setSigningMonitor","notifySend","pre","post","postr_1","notifyComplete","pb","lpad","str","padChar","nChars","padding","repeat","max","rdrop","char","ldrop","handleFormat","amt","decimals","splitValue","Number","isInteger","amtStr","splitAt","lPredropped","rPre","rSliced","formatWithDecimals","apiStateMismatchError","es","as","formatLoc","_stateSourceMap","el","al","fmtEs","makeParseCurrency","defaultDecs","split","amtL","amtR","amtMore","parseUnits"],"sources":["/Users/david/reach/morra/morraUI/node_modules/@reach-sh/stdlib/shared_impl.mjs"],"sourcesContent":["var __assign = (this && this.__assign) || function() {\n  __assign = Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s)\n        if (Object.prototype.hasOwnProperty.call(s, p))\n          t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function(resolve) { resolve(value); }); }\n  return new(P || (P = Promise))(function(resolve, reject) {\n    function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n\n    function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n\n    function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = (this && this.__generator) || function(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] },\n    f, y, t, g;\n  return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n\n  function verb(n) { return function(v) { return step([n, v]); }; }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return { value: op[1], done: false };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n          if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n          if (op[0] === 6 && _.label < t[1]) { _.label = t[1];\n            t = op; break; }\n          if (t && _.label < t[2]) { _.label = t[2];\n            _.ops.push(op); break; }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) { op = [6, e];\n      y = 0; } finally { f = t = 0; }\n    if (op[0] & 5) throw op[1];\n    return { value: op[0] ? op[1] : void 0, done: true };\n  }\n};\nvar __read = (this && this.__read) || function(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n    r, ar = [],\n    e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) { e = { error: error }; } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally { if (e) throw e.error; }\n  }\n  return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function(to, from, pack) {\n  if (pack || arguments.length === 2)\n    for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n        if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n        ar[i] = from[i];\n      }\n    }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\n// This can depend on the shared backend\nimport crypto from 'crypto';\nimport Timeout from 'await-timeout';\nimport ethers from 'ethers';\nimport { bigNumberify, } from './CBR.mjs';\nimport util from 'util';\nimport { hexlify, checkedBigNumberify, bytesEq, assert, formatAssertInfo, } from './shared_backend.mjs';\nimport { process } from './shim.mjs';\nexport { hexlify } from './shared_backend.mjs';\n// This is dumb but it's how ESLint says to do it\n// `hasOwnProperty` is important for denying access to prototype fields\n// https://eslint.org/docs/rules/no-prototype-builtins\nexport var hasProp = function(o, p) { return o && {}.hasOwnProperty.call(o, p); };\nexport var j2sf = function(x) {\n  // We're removing duplicated values, so we can remove cyclic references\n  var seen = [];\n  var rep = function(key, val) {\n    void key;\n    if (val != null && typeof val === \"object\") {\n      var idx = seen.indexOf(val);\n      if (idx >= 0) {\n        return \"@\".concat(idx);\n      }\n      seen.push(val);\n    }\n    return val;\n  };\n  return JSON.stringify(x, rep, 2);\n};\nexport var j2s = function(x) {\n  var xs = \"\".concat(x);\n  if (!(x && x._isBigNumber) && (xs === '{}' || xs.startsWith('[object'))) {\n    return j2sf(x);\n  }\n  return xs;\n};\nvar DEBUG = truthyEnv(process.env.REACH_DEBUG);\nexport var setDEBUG = function(b) {\n  if (b === false || b === true) {\n    DEBUG = b;\n  } else {\n    throw Error(\"Expected bool, got \".concat(j2s(b)));\n  }\n};\nexport var hideWarnings = function() { return truthyEnv(process.env.REACH_NO_WARN); };\nexport var getDEBUG = function() { return DEBUG; };\nexport var debug = function() {\n  var msgs = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    msgs[_i] = arguments[_i];\n  }\n  if (getDEBUG()) {\n    // Print arrays/objects in full instead of the default depth of 2\n    var betterMsgs = msgs.map(function(msg) {\n      return [\"object\", \"array\"].includes(typeof msg) && util && util.inspect instanceof Function ?\n        util.inspect(msg, false, null, true) :\n        msg;\n    });\n    void(betterMsgs);\n    // Print objects for indentation, colors, etc...\n    console.log.apply(console, __spreadArray([new Date(), \"DEBUG:\"], __read(msgs), false));\n  }\n};\nvar isUntaggedView = function(x) {\n  return 'ty' in x && 'decode' in x;\n};\nexport var stdVerifyContract = function(stdArgs, doVerify) {\n  return __awaiter(void 0, void 0, void 0, function() {\n    var getTrustedVerifyResult, setTrustedVerifyResult, r;\n    return __generator(this, function(_a) {\n      switch (_a.label) {\n        case 0:\n          getTrustedVerifyResult = stdArgs.getTrustedVerifyResult, setTrustedVerifyResult = stdArgs.setTrustedVerifyResult;\n          r = getTrustedVerifyResult();\n          if (r) {\n            return [2 /*return*/ , r];\n          }\n          return [4 /*yield*/ , doVerify()];\n        case 1:\n          r = _a.sent();\n          setTrustedVerifyResult(r);\n          return [2 /*return*/ , r];\n      }\n    });\n  });\n};\nexport var stdABIFilter = function(x) {\n  if (x.name && x.name.startsWith('_reach')) {\n    return false;\n  }\n  return true;\n};\nexport var stdGetABI = function(ABI) {\n  return function(isFull) {\n    return isFull ? ABI : ABI.filter(stdABIFilter);\n  };\n};\nexport var stdContract = function(stdContractArgs) {\n  var bin = stdContractArgs.bin,\n    getABI = stdContractArgs.getABI,\n    waitUntilTime = stdContractArgs.waitUntilTime,\n    waitUntilSecs = stdContractArgs.waitUntilSecs,\n    selfAddress = stdContractArgs.selfAddress,\n    iam = stdContractArgs.iam,\n    stdlib = stdContractArgs.stdlib,\n    setupView = stdContractArgs.setupView,\n    setupEvents = stdContractArgs.setupEvents,\n    _setup = stdContractArgs._setup,\n    givenInfoP = stdContractArgs.givenInfoP;\n  var _a = (function() {\n      var _setInfo = function(info) {\n        throw Error(\"Cannot set info(\".concat(j2s(info), \") (i.e. deploy) when acc.contract called with contract info: You are trying to attach to a contract as the deployer, which is not possible.\"));\n        return;\n      };\n      if (givenInfoP !== undefined) {\n        return {\n          setInfo: _setInfo,\n          getInfo: (function() { return givenInfoP; })\n        };\n      } else {\n        var beenSet_1 = false;\n        var _infoP_1 = new Promise(function(resolve) {\n          _setInfo = function(info) {\n            if (beenSet_1) {\n              throw Error(\"Cannot set info(\".concat(j2s(info), \") (i.e. deploy) twice\"));\n            }\n            resolve(info);\n            beenSet_1 = true;\n          };\n        });\n        return {\n          setInfo: _setInfo,\n          getInfo: (function() { return _infoP_1; })\n        };\n      }\n    })(),\n    setInfo = _a.setInfo,\n    getInfo = _a.getInfo;\n  var trustedVerifyResult = undefined;\n  var getTrustedVerifyResult = function() { return trustedVerifyResult; };\n  var setTrustedVerifyResult = function(x) { trustedVerifyResult = x; };\n  var viewArgs = { getInfo: getInfo, setTrustedVerifyResult: setTrustedVerifyResult, getTrustedVerifyResult: getTrustedVerifyResult };\n  var setupArgs = __assign(__assign({}, viewArgs), { setInfo: setInfo });\n  var _initialize = function() {\n    var _a = _setup(setupArgs),\n      getContractInfo = _a.getContractInfo,\n      getContractAddress = _a.getContractAddress,\n      getContractCompanion = _a.getContractCompanion,\n      getBalance = _a.getBalance,\n      sendrecv = _a.sendrecv,\n      recv = _a.recv,\n      getCurrentStep = _a.getCurrentStep,\n      getState = _a.getState,\n      apiMapRef = _a.apiMapRef,\n      simTokenAccepted = _a.simTokenAccepted;\n    return {\n      selfAddress: selfAddress,\n      iam: iam,\n      stdlib: stdlib,\n      waitUntilTime: waitUntilTime,\n      waitUntilSecs: waitUntilSecs,\n      getContractInfo: getContractInfo,\n      getContractAddress: getContractAddress,\n      getContractCompanion: getContractCompanion,\n      getBalance: getBalance,\n      sendrecv: sendrecv,\n      recv: recv,\n      getCurrentStep: getCurrentStep,\n      getState: getState,\n      apiMapRef: apiMapRef,\n      simTokenAccepted: simTokenAccepted\n    };\n  };\n  var ctcC = { _initialize: _initialize };\n  var _b = setupView(viewArgs),\n    viewLib = _b.viewLib,\n    getView1 = _b.getView1;\n  var views_bin = bin._getViews({ reachStdlib: stdlib }, viewLib);\n  var mkViews = function(isSafe) {\n    return objectMap(views_bin.infos, (function(v, vm) {\n      return isUntaggedView(vm) ?\n        getView1(views_bin.views, v, undefined, vm, isSafe) :\n        objectMap(vm, (function(k, vi) {\n          return getView1(views_bin.views, v, k, vi, isSafe);\n        }));\n    }));\n  };\n  var views = mkViews(true);\n  var unsafeViews = mkViews(false);\n  var participants = objectMap(bin._Participants, (function(pn, p) {\n    void(pn);\n    return (function(io) {\n      return p(ctcC, io);\n    });\n  }));\n  var mkApis = function(isSafe) {\n    if (isSafe === void 0) { isSafe = false; }\n    return objectMap(bin._APIs, (function(an, am) {\n      var f = function(afn, ab) {\n        var mk = function(sep) {\n          return (afn === undefined) ? \"\".concat(an) : \"\".concat(an).concat(sep).concat(afn);\n        };\n        var bp = mk(\"_\");\n        delete participants[bp];\n        var bl = mk(\".\");\n        return function() {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          var terminal = { terminated: bl };\n          var theResolve;\n          var theReject;\n          var p = new Promise(function(resolve, reject) {\n            theResolve = resolve;\n            theReject = reject;\n          });\n          var fail = function(err) {\n            if (isSafe) {\n              theResolve(['None', null]);\n            } else {\n              theReject(err);\n            }\n          };\n          debug(\"\".concat(bl, \": start\"), args);\n          ab(ctcC, {\n            \"in\": (function() {\n              debug(\"\".concat(bl, \": in\"), args);\n              return args;\n            }),\n            \"out\": (function(oargs, res) {\n              debug(\"\".concat(bl, \": out\"), oargs, res);\n              theResolve(isSafe ? ['Some', res] : res);\n              throw terminal;\n            })\n          })[\"catch\"](function(err) {\n            if (Object.is(err, terminal)) {\n              debug(\"\".concat(bl, \": done\"));\n            } else {\n              fail(new Error(\"\".concat(bl, \" errored with \").concat(err)));\n            }\n          }).then(function(res) {\n            fail(new Error(\"\".concat(bl, \" returned with \").concat(j2s(res))));\n          });\n          return p;\n        };\n      };\n      return (typeof am === 'object') ?\n        objectMap(am, f) :\n        f(undefined, am);\n    }));\n  };\n  var apis = mkApis(false);\n  var safeApis = mkApis(true);\n  var eventMap = bin._getEvents({ reachStdlib: stdlib });\n  var createEventStream = setupEvents(viewArgs).createEventStream;\n  var events = objectMap(eventMap, (function(k, v) {\n    return Array.isArray(v) // untagged\n      ?\n      createEventStream(k, v) :\n      objectMap(v, (function(kp, vp) {\n        return createEventStream(k + \"_\" + kp, vp);\n      }));\n  }));\n  return __assign(__assign({}, ctcC), {\n    getABI: getABI,\n    getInfo: getInfo,\n    getContractAddress: (function() { return _initialize().getContractAddress(); }),\n    participants: participants,\n    p: participants,\n    views: views,\n    v: views,\n    getViews: function() {\n      console.log(\"WARNING: ctc.getViews() is deprecated; use ctc.views or ctc.v instead.\");\n      return views;\n    },\n    unsafeViews: unsafeViews,\n    apis: apis,\n    a: apis,\n    safeApis: safeApis,\n    events: events,\n    e: events\n  });\n};\nexport var stdAccount_unsupported = function(conn) {\n  var setGasLimit = function(ngl) {\n    void(ngl);\n    console.warn(\"setGasLimit not supported on \".concat(conn));\n  };\n  var getGasLimit = function() {\n    console.warn(\"getGasLimit not supported on \".concat(conn));\n    return bigNumberify(0);\n  };\n  var setStorageLimit = function(ngl) {\n    void(ngl);\n    console.warn(\"setStorageLimit not supported on \".concat(conn));\n  };\n  var getStorageLimit = function() {\n    console.warn(\"getStorageLimit not supported on \".concat(conn));\n    return bigNumberify(0);\n  };\n  return { setGasLimit: setGasLimit, getGasLimit: getGasLimit, setStorageLimit: setStorageLimit, getStorageLimit: getStorageLimit };\n};\nexport var stdAccount = function(orig) {\n  return __assign(__assign({}, orig), {\n    deploy: function(bin) {\n      console.log(\"WARNING: acc.deploy(bin) is deprecated; use acc.contract(bin) instead. Deployment is implied by the first publication.\");\n      return orig.contract(bin, undefined);\n    },\n    attach: function(bin, ctcInfoP) {\n      console.log(\"WARNING: acc.attach(bin, info) is deprecated; use acc.contract(bin, info) instead. Attachment is implied by reception of the first publication.\");\n      return orig.contract(bin, ctcInfoP);\n    }\n  });\n};\n/**\n * @description Create a getter/setter, where the getter defaults to memoizing a thunk\n */\nexport function replaceableThunk(thunk) {\n  var called = false;\n  var res = null;\n\n  function get() {\n    if (!called) {\n      called = true;\n      res = thunk();\n    }\n    return res;\n  }\n\n  function set(val) {\n    if (called) {\n      throw Error(\"Cannot re-set value once already set\");\n    }\n    res = val;\n    called = true;\n  }\n  return [get, set];\n}\n/**\n * @description Only perform side effects from thunk on the first call.\n */\nexport function memoizeThunk(thunk) {\n  return replaceableThunk(thunk)[0];\n}\n/**\n * @description ascLabels[i] = label; labelMap[label] = i;\n */\nexport var labelMaps = function(co) {\n  var ascLabels = Object.keys(co).sort();\n  var labelMap = {};\n  for (var i in ascLabels) {\n    labelMap[ascLabels[i]] = parseInt(i);\n  }\n  return { ascLabels: ascLabels, labelMap: labelMap };\n};\n/** @description Check that a stringy env value doesn't look falsy. */\nexport function truthyEnv(v) {\n  if (!v)\n    return false;\n  return ![\n    '0', 'false', 'f', '#f', 'no', 'off', 'n', '',\n  ].includes(v && v.toLowerCase && v.toLowerCase());\n}\nexport var envDefault = function(v, d) {\n  return (v === undefined || v === null) ? d : v;\n};\nexport var envDefaultNoEmpty = function(v, d) {\n  var v2 = envDefault(v, d);\n  return v2 === '' ? d : v2;\n};\nexport var makeDigest = function(mode, prep) {\n  return function(t, v) {\n    void(hexlify);\n    // const args = [t, v];\n    // debug('digest(', args, ') =>');\n    var kekCat = prep(t, v);\n    // debug('digest(', args, ') => internal(', hexlify(kekCat), ')');\n    var f = mode === 'keccak256' ? ethers.utils.keccak256 : ethers.utils.sha256;\n    var r = f(kekCat);\n    debug('digest', { mode: mode, prep: prep, t: t, v: v, kekCat: kekCat, f: f, r: r });\n    // debug('keccak(', args, ') => internal(', hexlify(kekCat), ') => ', r);\n    return r;\n  };\n};\nexport var hexToString = ethers.utils.toUtf8String;\nvar byteToHex = function(b) { return (b & 0xFF).toString(16).padStart(2, '0'); };\nvar byteArrayToHex = function(b) { return Array.from(b, byteToHex).join(''); };\nvar hexTo0x = function(h) { return '0x' + h.replace(/^0x/, ''); };\nexport var hexToBigNumber = function(h) { return bigNumberify(hexTo0x(h)); };\nexport var makeRandom = function(width) {\n  var randomUInt = function() {\n    return hexToBigNumber(byteArrayToHex(crypto.randomBytes(width)));\n  };\n  var hasRandom = {\n    random: randomUInt\n  };\n  return { randomUInt: randomUInt, hasRandom: hasRandom };\n};\nvar bnSqrt = function(y) {\n  var acc = [y, y.div(2).add(1)];\n  var ans = undefined;\n  while (ans === undefined) {\n    var _a = __read(acc, 2),\n      z = _a[0],\n      x = _a[1];\n    if (x.lt(2)) {\n      ans = x;\n    } else if (x.lt(z)) {\n      acc = [x, y.div(x).add(x).div(2)];\n    } else {\n      ans = x;\n    }\n  }\n  return ans;\n};\nexport var UInt256_max = ethers.BigNumber.from(2).pow(256).sub(1);\nexport var makeArith = function(m) {\n  var checkB = function(x) {\n    return checkedBigNumberify(\"internal\", UInt256_max, x);\n  };\n  var checkM = function(x) {\n    return checkedBigNumberify(\"internal\", m, x);\n  };\n  var doBN2 = function(f, a, b) { return a[f](b); };\n  var getCheck = function(w) { return w ? checkB : checkM; };\n  var cast = function(from, to, x, trunc) {\n    var checkF = getCheck(from);\n    var checkT = getCheck(to);\n    var bigX = bigNumberify(x);\n    var maybeTruncated = trunc ? bigX.and(m) : bigX;\n    return checkT(checkF(maybeTruncated));\n  };\n  var liftX2 = function(check) { return function(f) { return function(a, b) { return check(doBN2(f, bigNumberify(a), bigNumberify(b))); }; }; };\n  var liftB = liftX2(checkB);\n  var liftM = liftX2(checkM);\n  var doBN1 = function(f, a) {\n    if (f === 'sqrt') {\n      return bnSqrt(a);\n    } else {\n      throw Error('impossible BNOp1');\n    }\n  };\n  var liftX1 = function(check) { return function(f) { return function(a) { return check(doBN1(f, bigNumberify(a))); }; }; };\n  var liftB1 = liftX1(checkB);\n  var liftM1 = liftX1(checkM);\n  var add = liftM('add');\n  var sub = liftM('sub');\n  var mod = liftM('mod');\n  var mul = liftM('mul');\n  var div = liftM('div');\n  var band = liftM('and');\n  var bior = liftM('or');\n  var bxor = liftM('xor');\n  var sqrt = liftM1('sqrt');\n  var add256 = liftB('add');\n  var sub256 = liftB('sub');\n  var mod256 = liftB('mod');\n  var mul256 = liftB('mul');\n  var div256 = liftB('div');\n  var band256 = liftB('and');\n  var bior256 = liftB('or');\n  var bxor256 = liftB('xor');\n  var sqrt256 = liftB1('sqrt');\n  var muldiv = function(a, b, c) {\n    var prod = bigNumberify(a).mul(bigNumberify(b));\n    return checkM(prod.div(bigNumberify(c)));\n  };\n  return {\n    add: add,\n    sub: sub,\n    mod: mod,\n    mul: mul,\n    div: div,\n    band: band,\n    bior: bior,\n    bxor: bxor,\n    sqrt: sqrt,\n    add256: add256,\n    sub256: sub256,\n    mod256: mod256,\n    mul256: mul256,\n    div256: div256,\n    band256: band256,\n    bior256: bior256,\n    bxor256: bxor256,\n    sqrt256: sqrt256,\n    cast: cast,\n    muldiv: muldiv\n  };\n};\nexport var argsSlice = function(args, cnt) {\n  return cnt == 0 ? [] : args.slice(-1 * cnt);\n};\nexport var argsSplit = function(args, cnt) {\n  return cnt == 0 ? [args, []] : [args.slice(0, args.length - cnt), args.slice(-1 * cnt)];\n};\nexport var objectMap = function(object, mapFn) {\n  return Object.keys(object).reduce(function(result, key) {\n    result[key] = mapFn(key, object[key]);\n    return result;\n  }, {});\n};\nexport var mkAddressEq = function(T_Address) {\n  return function(x, y) {\n    return bytesEq(T_Address.canonicalize(x), T_Address.canonicalize(y));\n  };\n};\nexport var ensureConnectorAvailable = function(bin, conn, jsVer, connVer) {\n  checkVersion(bin._backendVersion, jsVer, \"JavaScript backend\");\n  var connectors = bin._Connectors;\n  var conn_bin = connectors[conn];\n  if (!conn_bin) {\n    throw (new Error(\"The application was not compiled for the \".concat(conn, \" connector, only: \").concat(Object.keys(connectors))));\n  }\n  checkVersion(conn_bin.version, connVer, \"\".concat(conn, \" backend\"));\n};\nexport var checkVersion = function(actual, expected, label) {\n  if (actual !== expected) {\n    var older = (actual === undefined) || (actual < expected);\n    var more = older ? \"update your compiler and recompile!\" : \"update your standard library and rerun!\";\n    throw Error(\"This Reach compiled \".concat(label, \" does not match the expectations of this Reach standard library: expected \").concat(expected, \", but got \").concat(actual, \"; \").concat(more));\n  }\n};\nvar argHelper = function(xs, f, op) {\n  if (xs.length == 0) {\n    return undefined;\n  }\n  return xs.reduce(function(accum, x) {\n    return op(f(x), f(accum)) ? x : accum;\n  }, xs[0]);\n};\nexport var argMax = function(xs, f) {\n  return argHelper(xs, f, function(a, b) { return a > b; });\n};\nexport var argMin = function(xs, f) {\n  return argHelper(xs, f, function(a, b) { return a < b; });\n};\nexport var make_newTestAccounts = function(newTestAccount) {\n  var makeArr = function(k) { return (new Array(k)).fill(1); };\n  var parallel = function(k, bal) {\n    return Promise.all(makeArr(k).map(function(_) { return newTestAccount(bal); }));\n  };\n  var serial = function(k, bal) {\n    return __awaiter(void 0, void 0, void 0, function() {\n      var arr, i, _a, _b;\n      return __generator(this, function(_c) {\n        switch (_c.label) {\n          case 0:\n            arr = [];\n            i = 0;\n            _c.label = 1;\n          case 1:\n            if (!(i < k)) return [3 /*break*/ , 4];\n            _b = (_a = arr).push;\n            return [4 /*yield*/ , newTestAccount(bal)];\n          case 2:\n            _b.apply(_a, [_c.sent()]);\n            _c.label = 3;\n          case 3:\n            i++;\n            return [3 /*break*/ , 1];\n          case 4:\n            return [2 /*return*/ , arr];\n        }\n      });\n    });\n  };\n  return { parallel: parallel, serial: serial };\n};\nexport var make_waitUntilX = function(label, getCurrent, step) {\n  return function(target, onProgress) {\n    return __awaiter(void 0, void 0, void 0, function() {\n      var onProg, current, notify;\n      return __generator(this, function(_a) {\n        switch (_a.label) {\n          case 0:\n            onProg = onProgress || (function() {});\n            return [4 /*yield*/ , getCurrent()];\n          case 1:\n            current = _a.sent();\n            notify = function() {\n              var o = { current: current, target: target };\n              debug(\"waitUntilX:\", label, o);\n              onProg(o);\n            };\n            _a.label = 2;\n          case 2:\n            if (!current.lt(target)) return [3 /*break*/ , 4];\n            debug('waitUntilX', { label: label, current: current, target: target });\n            return [4 /*yield*/ , step(current.add(1))];\n          case 3:\n            current = _a.sent();\n            notify();\n            return [3 /*break*/ , 2];\n          case 4:\n            notify();\n            return [2 /*return*/ , current];\n        }\n      });\n    });\n  };\n};\nexport var checkTimeout = function(runningIsolated, getTimeSecs, timeoutAt, nowTime) {\n  return __awaiter(void 0, void 0, void 0, function() {\n    var _a, mode, val, nowSecs, e_1, nowSecs;\n    return __generator(this, function(_b) {\n      switch (_b.label) {\n        case 0:\n          debug('checkTimeout', { timeoutAt: timeoutAt, nowTime: nowTime });\n          if (!timeoutAt) {\n            return [2 /*return*/ , false];\n          }\n          _a = __read(timeoutAt, 2), mode = _a[0], val = _a[1];\n          if (!(mode === 'time')) return [3 /*break*/ , 1];\n          return [2 /*return*/ , val.lte(nowTime)];\n        case 1:\n          if (!(mode === 'secs')) return [3 /*break*/ , 6];\n          _b.label = 2;\n        case 2:\n          _b.trys.push([2, 4, , 5]);\n          return [4 /*yield*/ , getTimeSecs(nowTime)];\n        case 3:\n          nowSecs = _b.sent();\n          return [2 /*return*/ , val.lte(nowSecs)];\n        case 4:\n          e_1 = _b.sent();\n          debug('checkTimeout', 'err', \"\".concat(e_1));\n          if (runningIsolated()) {\n            nowSecs = Math.floor(Date.now() / 1000);\n            debug('checkTimeout', 'isolated', val.toString(), nowSecs);\n            return [2 /*return*/ , val.lt(nowSecs - 1)];\n          }\n          return [2 /*return*/ , false];\n        case 5:\n          return [3 /*break*/ , 7];\n        case 6:\n          throw new Error(\"invalid TimeArg mode\");\n        case 7:\n          return [2 /*return*/ ];\n      }\n    });\n  });\n};\nvar neverTrue = function(r) {\n  return __awaiter(void 0, void 0, void 0, function() {\n    return __generator(this, function(_a) {\n      return [2 /*return*/ , (void(r), false)];\n    });\n  });\n};;;;\nexport var makeEventQueue = function(ctorArgs) {\n  var raw2proc = ctorArgs.raw2proc,\n    alwaysIgnored = ctorArgs.alwaysIgnored,\n    getTxns = ctorArgs.getTxns,\n    getTxnTime = ctorArgs.getTxnTime;\n  var initArgs = undefined;\n  var ptxns = [];\n  var ctime = bigNumberify(0);\n  var customIgnore = [];\n  var isInited = function() { return initArgs !== undefined; };\n  var init = function(args) {\n    assert(initArgs === undefined, \"init: must be uninitialized\");\n    initArgs = args;\n  };\n  var pushIgnore = function(pred) {\n    assert(initArgs !== undefined, \"pushIgnore: must be initialized\");\n    customIgnore.push(pred);\n  };\n  var notIgnored = function(txn) { return (!alwaysIgnored(txn)); };\n  var peq = function(lab, didTimeout, limsug) {\n    return __awaiter(void 0, void 0, void 0, function() {\n      var dhead, updateCtime, howMany, _loop_1, state_1;\n      return __generator(this, function(_a) {\n        switch (_a.label) {\n          case 0:\n            dhead = \"\".concat(lab, \" peq\");\n            updateCtime = function(ntime) {\n              if (ctime.lt(ntime)) {\n                debug(dhead, 'updating ctime', { ctime: ctime, ntime: ntime });\n                ctime = ntime;\n              }\n              return ntime;\n            };\n            if (initArgs === undefined) {\n              throw Error(\"\".concat(dhead, \": not initialized\"));\n            }\n            howMany = 0;\n            _loop_1 = function() {\n              var _b, txns, gtime, r_1, cmpTxn, cis, ci, t, _c;\n              return __generator(this, function(_d) {\n                switch (_d.label) {\n                  case 0:\n                    return [4 /*yield*/ , getTxns(dhead, initArgs, ctime, howMany++, limsug)];\n                  case 1:\n                    _b = _d.sent(), txns = _b.txns, gtime = _b.gtime;\n                    if (txns.length === 0 && gtime) {\n                      updateCtime(gtime);\n                    } else {\n                      r_1 = function(x) { return updateCtime(getTxnTime(x)); };\n                      cmpTxn = function(x, y) {\n                        return r_1(x).sub(r_1(y)).toNumber();\n                      };\n                      txns.sort(cmpTxn);\n                      if (txns.length === 1) {\n                        r_1(txns[0]);\n                      }\n                      txns = txns.filter(notIgnored);\n                    }\n                    cis = customIgnore;\n                    while (txns.length > 0 && cis.length > 0) {\n                      ci = cis[0];\n                      cis.shift();\n                      t = txns[0];\n                      txns.shift();\n                      if (!ci(t)) {\n                        throw Error(\"\".concat(dhead, \" customIgnore present, \").concat(ci, \", but top txn did not match \").concat(j2s(t)));\n                      } else {\n                        debug(dhead, \"ignored\", ci, t);\n                      }\n                    }\n                    _c = txns.length === 0;\n                    if (!_c) return [3 /*break*/ , 3];\n                    return [4 /*yield*/ , didTimeout(ctime)];\n                  case 2:\n                    _c = (_d.sent());\n                    _d.label = 3;\n                  case 3:\n                    if (_c) {\n                      return [2 /*return*/ , { value: { timeout: true, time: ctime } }];\n                    }\n                    ptxns = txns.map(raw2proc);\n                    return [2 /*return*/ ];\n                }\n              });\n            };\n            _a.label = 1;\n          case 1:\n            if (!(ptxns.length === 0)) return [3 /*break*/ , 3];\n            return [5 /*yield**/ , _loop_1()];\n          case 2:\n            state_1 = _a.sent();\n            if (typeof state_1 === \"object\")\n              return [2 /*return*/ , state_1.value];\n            return [3 /*break*/ , 1];\n          case 3:\n            return [2 /*return*/ , { timeout: false, txn: ptxns[0] }];\n        }\n      });\n    });\n  };\n  var deq = function(dhead, limsug) {\n    return __awaiter(void 0, void 0, void 0, function() {\n      var r;\n      return __generator(this, function(_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/ , peq(dhead, neverTrue, limsug)];\n          case 1:\n            r = _a.sent();\n            if (r.timeout) {\n              throw Error('impossible');\n            }\n            ptxns.shift();\n            return [2 /*return*/ , r.txn];\n        }\n      });\n    });\n  };\n  return { isInited: isInited, init: init, peq: peq, deq: deq, pushIgnore: pushIgnore };\n};;\nexport var makeEventStream = function(args) {\n  var eq = args.eq,\n    getTxnTime = args.getTxnTime,\n    sync = args.sync,\n    getNetworkTime = args.getNetworkTime,\n    getLogs = args.getLogs,\n    parseLog = args.parseLog;\n  var time = bigNumberify(0);\n  var logs = [];\n  var seek = function(t) {\n    assert(time.lt(t), 'seek must seek future');\n    debug(\"EventStream::seek\", t);\n    time = t;\n    logs = [];\n  };\n  var next = function() {\n    return __awaiter(void 0, void 0, void 0, function() {\n      var dhead, parsedLog, txn, cr, l;\n      return __generator(this, function(_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/ , sync()];\n          case 1:\n            _a.sent();\n            dhead = \"EventStream::next\";\n            parsedLog = undefined;\n            _a.label = 2;\n          case 2:\n            if (!(parsedLog === undefined)) return [3 /*break*/ , 6];\n            _a.label = 3;\n          case 3:\n            if (!(logs.length === 0)) return [3 /*break*/ , 5];\n            return [4 /*yield*/ , eq.deq(dhead)];\n          case 4:\n            txn = _a.sent();\n            debug(dhead, { txn: txn });\n            cr = getTxnTime(txn);\n            if (cr.gte(time)) {\n              time = cr;\n              logs = getLogs(txn);\n              debug(dhead, { time: time, logs: logs });\n            }\n            return [3 /*break*/ , 3];\n          case 5:\n            l = logs[0];\n            logs.shift();\n            parsedLog = parseLog(l);\n            debug(dhead, { parsedLog: parsedLog, l: l });\n            return [3 /*break*/ , 2];\n          case 6:\n            debug(dhead, 'ret');\n            return [2 /*return*/ , { when: time, what: parsedLog }];\n        }\n      });\n    });\n  };\n  var seekNow = function() {\n    return __awaiter(void 0, void 0, void 0, function() {\n      var _a;\n      return __generator(this, function(_b) {\n        switch (_b.label) {\n          case 0:\n            _a = seek;\n            return [4 /*yield*/ , getNetworkTime()];\n          case 1:\n            return [2 /*return*/ , _a.apply(void 0, [_b.sent()])];\n        }\n      });\n    });\n  };\n  var lastTime = function() {\n    return __awaiter(void 0, void 0, void 0, function() {\n      return __generator(this, function(_a) {\n        return [2 /*return*/ , time];\n      });\n    });\n  };\n  var monitor = function(onEvent) {\n    return __awaiter(void 0, void 0, void 0, function() {\n      var _a;\n      return __generator(this, function(_b) {\n        switch (_b.label) {\n          case 0:\n            if (!true) return [3 /*break*/ , 2];\n            _a = onEvent;\n            return [4 /*yield*/ , next()];\n          case 1:\n            _a.apply(void 0, [_b.sent()]);\n            return [3 /*break*/ , 0];\n          case 2:\n            return [2 /*return*/ ];\n        }\n      });\n    });\n  };\n  return { lastTime: lastTime, seek: seek, seekNow: seekNow, monitor: monitor, next: next };\n};\nexport function getQueryLowerBound() {\n  console.log(\"WARNING: getQueryLowerBound() is deprecated and does nothing.\");\n  return bigNumberify(0);\n};\nexport function setQueryLowerBound(x) {\n  void(x);\n  console.log(\"WARNING: setQueryLowerBound() is deprecated and does nothing.\");\n};\nvar makePromise = function() {\n  var r = function(a) { void(a); throw new Error(\"promise never initialized\"); };\n  var p = new Promise(function(resolve) { r = resolve; });\n  return [p, r];\n};\nvar Signal = /** @class */ (function() {\n  function Signal() {\n    var _a;\n    _a = __read(makePromise(), 2), this.p = _a[0], this.r = _a[1];\n  }\n  Signal.prototype.wait = function() { return this.p; };\n  Signal.prototype.notify = function() { this.r(true); };\n  return Signal;\n}());\nexport { Signal };;\nvar Lock = /** @class */ (function() {\n  function Lock() {\n    this.locked = false;\n  }\n  Lock.prototype.acquire = function() {\n    return __awaiter(this, void 0, void 0, function() {\n      var x;\n      return __generator(this, function(_a) {\n        switch (_a.label) {\n          case 0:\n            x = 1;\n            _a.label = 1;\n          case 1:\n            if (!this.locked) return [3 /*break*/ , 3];\n            return [4 /*yield*/ , Timeout.set(Math.min(512, x))];\n          case 2:\n            _a.sent();\n            x = x * 2;\n            return [3 /*break*/ , 1];\n          case 3:\n            this.locked = true;\n            return [2 /*return*/ ];\n        }\n      });\n    });\n  };\n  Lock.prototype.release = function() {\n    this.locked = false;\n  };\n  Lock.prototype.runWith = function(f) {\n    return __awaiter(this, void 0, void 0, function() {\n      var r, e_2;\n      return __generator(this, function(_a) {\n        switch (_a.label) {\n          case 0:\n            return [4 /*yield*/ , this.acquire()];\n          case 1:\n            _a.sent();\n            _a.label = 2;\n          case 2:\n            _a.trys.push([2, 4, , 5]);\n            return [4 /*yield*/ , f()];\n          case 3:\n            r = _a.sent();\n            this.release();\n            return [2 /*return*/ , r];\n          case 4:\n            e_2 = _a.sent();\n            this.release();\n            throw e_2;\n          case 5:\n            return [2 /*return*/ ];\n        }\n      });\n    });\n  };\n  return Lock;\n}());\nexport { Lock };\nexport function isNone(m) {\n  return m.length === 0;\n}\nexport function isSome(m) {\n  return !isNone(m);\n}\nexport var Some = function(m) { return [m]; };\nexport var None = [];\nexport var retryLoop = function(lab, f) {\n  return __awaiter(void 0, void 0, void 0, function() {\n    var retries, e_3;\n    return __generator(this, function(_a) {\n      switch (_a.label) {\n        case 0:\n          retries = 0;\n          _a.label = 1;\n        case 1:\n          if (!true) return [3 /*break*/ , 6];\n          _a.label = 2;\n        case 2:\n          _a.trys.push([2, 4, , 5]);\n          return [4 /*yield*/ , f()];\n        case 3:\n          return [2 /*return*/ , _a.sent()];\n        case 4:\n          e_3 = _a.sent();\n          console.log(\"retryLoop\", { lab: lab, retries: retries, e: e_3 });\n          retries++;\n          return [3 /*break*/ , 5];\n        case 5:\n          return [3 /*break*/ , 1];\n        case 6:\n          return [2 /*return*/ ];\n      }\n    });\n  });\n};\nexport var makeSigningMonitor = function() {\n  var mon = undefined;\n  var setSigningMonitor = function(h) {\n    mon = h;\n  };\n  var notifySend = function(e, pre) {\n    return __awaiter(void 0, void 0, void 0, function() {\n      var _a, post, postr_1, notifyComplete;\n      return __generator(this, function(_b) {\n        switch (_b.label) {\n          case 0:\n            if (!mon) return [3 /*break*/ , 2];\n            _a = __read(makePromise(), 2), post = _a[0], postr_1 = _a[1];\n            mon(e, pre, post);\n            notifyComplete = function(pb) {\n              return __awaiter(void 0, void 0, void 0, function() {\n                var b;\n                return __generator(this, function(_a) {\n                  switch (_a.label) {\n                    case 0:\n                      return [4 /*yield*/ , pb];\n                    case 1:\n                      b = _a.sent();\n                      postr_1(b);\n                      return [2 /*return*/ , b];\n                  }\n                });\n              });\n            };\n            return [4 /*yield*/ , pre];\n          case 1:\n            return [2 /*return*/ , [_b.sent(), notifyComplete]];\n          case 2:\n            return [4 /*yield*/ , pre];\n          case 3:\n            return [2 /*return*/ , [_b.sent(), function(x) { return x; }]];\n        }\n      });\n    });\n  };\n  return [setSigningMonitor, notifySend];\n};\n/** @example lpad('asdf', '0', 6); // => '00asdf' */\nvar lpad = function(str, padChar, nChars) {\n  var padding = padChar.repeat(Math.max(nChars - str.length, 0));\n  return padding + str;\n};\n/** @example rdrop('asfdfff', 'f'); // => 'asfd' */\nvar rdrop = function(str, char) {\n  while (str[str.length - 1] === char) {\n    str = str.slice(0, str.length - 1);\n  }\n  return str;\n};\n/** @example ldrop('007', '0'); // => '7' */\nvar ldrop = function(str, char) {\n  while (str[0] === char) {\n    str = str.slice(1);\n  }\n  return str;\n};\n// Helper to<BigNumber> -> string formatting function used in a couple of places\n// amt = the number to format\n// decimals = number of digits from the right to put the decimal point\n// splitValue = number of digits to keep after the decimal point\n// Example: handleFormat(1234567, 4, 2) => \"123.45\"\nexport var handleFormat = function(amt, decimals, splitValue) {\n  if (splitValue === void 0) { splitValue = 6; }\n  if (!(Number.isInteger(decimals) && 0 <= decimals)) {\n    throw Error(\"Expected decimals to be a nonnegative integer, but got \".concat(decimals, \".\"));\n  }\n  if (!(Number.isInteger(splitValue) && 0 <= splitValue)) {\n    throw Error(\"Expected split value to be a nonnegative integer, but got \".concat(decimals, \".\"));\n  }\n  var amtStr = bigNumberify(amt).toString();\n  var splitAt = Math.max(amtStr.length - splitValue, 0);\n  var lPredropped = amtStr.slice(0, splitAt);\n  var l = ldrop(lPredropped, '0') || '0';\n  if (decimals === 0) {\n    return l;\n  }\n  var rPre = lpad(amtStr.slice(splitAt), '0', splitValue);\n  var rSliced = rPre.slice(0, decimals);\n  var r = rdrop(rSliced, '0');\n  return r ? \"\".concat(l, \".\").concat(r) : l;\n};\nexport var formatWithDecimals = function(amt, decimals) {\n  return handleFormat(amt, decimals, decimals);\n};\nexport var apiStateMismatchError = function(bin, es, as) {\n  var formatLoc = function(s) {\n    return formatAssertInfo(bin._stateSourceMap[s.toNumber()]);\n  };\n  var msg = function(s, l) { return \"\\nState \".concat(s, \" corresponds to the commit() at \").concat(l); };\n  var el = Array.isArray(es) ?\n    es.map(function(s) { return msg(s, formatLoc(s)); }) :\n    msg(es, formatLoc(es));\n  var al = formatLoc(as);\n  var fmtEs = Array.isArray(es) ? \"[\" + es + \"]\" : es;\n  return Error(\"Expected the DApp to be in state(s) \".concat(fmtEs, \", but it was actually in state \").concat(as, \".\\n\") +\n    el +\n    msg(as, al) +\n    (el == al ? \"\\n(This means that the commit() is in the continuation of impure control-flow.)\" : \"\"));\n};\nexport var makeParseCurrency = function(defaultDecs) {\n  return function(amt, decimals) {\n    if (decimals === void 0) { decimals = defaultDecs; }\n    if (!(Number.isInteger(decimals) && 0 <= decimals)) {\n      throw Error(\"Expected decimals to be a nonnegative integer, but got \".concat(decimals, \".\"));\n    }\n    var _a = __read(amt.toString().split('.')),\n      amtL = _a[0],\n      amtR = _a[1],\n      amtMore = _a.slice(2);\n    if (amtMore.length > 0) {\n      throw Error(\"malformed input: parseCurrency('\".concat(amt, \"')\"));\n    }\n    var amtStr = \"\".concat(amtL, \".\").concat((amtR || '').slice(0, decimals));\n    return bigNumberify(ethers.utils.parseUnits(amtStr, decimals));\n  };\n};\n//# sourceMappingURL=shared_impl.js.map\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}