{"ast":null,"code":"/* await-timeout v0.6.0 by Vitaliy Potapov */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : (global = global || self, global.Timeout = factory());\n})(this, function () {\n  'use strict';\n\n  function promiseFinally(promise, fn) {\n    const success = result => {\n      fn();\n      return result;\n    };\n\n    const error = e => {\n      fn();\n      return Promise.reject(e);\n    };\n\n    return Promise.resolve(promise).then(success, error);\n  }\n  /**\n   * Converts any value to Error.\n   * @param {*} value\n   * @returns {Error}\n   */\n\n\n  function toError(value) {\n    value = typeof value === 'function' ? value() : value;\n    return typeof value === 'string' ? new Error(value) : value;\n  }\n  /**\n   * Promise-based replacement for setTimeout / clearTimeout.\n   */\n\n\n  class Timeout {\n    constructor() {\n      this._id = null;\n      this._delay = null;\n    }\n\n    get id() {\n      return this._id;\n    }\n\n    get delay() {\n      return this._delay;\n    }\n\n    set(delay) {\n      let rejectReason = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n      return new Promise((resolve, reject) => {\n        this.clear();\n        const fn = rejectReason ? () => reject(toError(rejectReason)) : resolve;\n        this._id = setTimeout(fn, delay);\n        this._delay = delay;\n      });\n    }\n\n    wrap(promise, delay) {\n      let rejectReason = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n      const wrappedPromise = promiseFinally(promise, () => this.clear());\n      const timer = this.set(delay, rejectReason);\n      return Promise.race([wrappedPromise, timer]);\n    }\n\n    clear() {\n      if (this._id) {\n        clearTimeout(this._id);\n      }\n    }\n\n  }\n\n  Timeout.set = function (delay, rejectReason) {\n    return new Timeout().set(delay, rejectReason);\n  };\n\n  Timeout.wrap = function (promise, delay, rejectReason) {\n    return new Timeout().wrap(promise, delay, rejectReason);\n  };\n\n  return Timeout;\n});","map":{"version":3,"names":["global","factory","exports","module","define","amd","self","Timeout","promiseFinally","promise","fn","success","result","error","e","Promise","reject","resolve","then","toError","value","Error","constructor","_id","_delay","id","delay","set","rejectReason","clear","setTimeout","wrap","wrappedPromise","timer","race","clearTimeout"],"sources":["/Users/david/reach/morra/morraUI/node_modules/await-timeout/dist/es6.js"],"sourcesContent":["/* await-timeout v0.6.0 by Vitaliy Potapov */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, global.Timeout = factory());\n}(this, function () { 'use strict';\n\n  function promiseFinally(promise, fn) {\n    const success = result => {\n      fn();\n      return result;\n    };\n    const error = e => {\n      fn();\n      return Promise.reject(e);\n    };\n    return Promise.resolve(promise).then(success, error);\n  }\n\n  /**\n   * Converts any value to Error.\n   * @param {*} value\n   * @returns {Error}\n   */\n  function toError(value) {\n    value = typeof value === 'function' ? value() : value;\n    return typeof value === 'string' ? new Error(value) : value;\n  }\n\n  /**\n   * Promise-based replacement for setTimeout / clearTimeout.\n   */\n\n  class Timeout {\n    constructor() {\n      this._id = null;\n      this._delay = null;\n    }\n\n    get id() {\n      return this._id;\n    }\n\n    get delay() {\n      return this._delay;\n    }\n\n    set(delay, rejectReason = '') {\n      return new Promise((resolve, reject) => {\n        this.clear();\n        const fn = rejectReason ? () => reject(toError(rejectReason)) : resolve;\n        this._id = setTimeout(fn, delay);\n        this._delay = delay;\n      });\n    }\n\n    wrap(promise, delay, rejectReason = '') {\n      const wrappedPromise = promiseFinally(promise, () => this.clear());\n      const timer = this.set(delay, rejectReason);\n      return Promise.race([wrappedPromise, timer]);\n    }\n\n    clear() {\n      if (this._id) {\n        clearTimeout(this._id);\n      }\n    }\n  }\n\n  Timeout.set = function (delay, rejectReason) {\n    return new Timeout().set(delay, rejectReason);\n  };\n\n  Timeout.wrap = function (promise, delay, rejectReason) {\n    return new Timeout().wrap(promise, delay, rejectReason);\n  };\n\n  return Timeout;\n\n}));\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}